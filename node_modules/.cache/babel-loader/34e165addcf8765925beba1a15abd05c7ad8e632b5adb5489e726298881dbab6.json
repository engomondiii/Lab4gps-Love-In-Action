{"ast":null,"code":"import defaultValue from \"../../Core/defaultValue.js\";\nimport defined from \"../../Core/defined.js\";\nimport ShaderDestination from \"../../Renderer/ShaderDestination.js\";\nimport BlendingState from \"../BlendingState.js\";\nimport Pass from \"../../Renderer/Pass.js\";\n\n/**\n * A pipeline stage for configuring the alpha options for handling translucency.\n *\n * @namespace AlphaPipelineStage\n *\n * @private\n */\nconst AlphaPipelineStage = {\n  name: \"AlphaPipelineStage\" // Helps with debugging\n};\nAlphaPipelineStage.process = function (renderResources, primitive, frameState) {\n  const alphaOptions = renderResources.alphaOptions;\n\n  // Ensure the pass is defined\n  const model = renderResources.model;\n  alphaOptions.pass = defaultValue(alphaOptions.pass, model.opaquePass);\n  const renderStateOptions = renderResources.renderStateOptions;\n  if (alphaOptions.pass === Pass.TRANSLUCENT) {\n    renderStateOptions.cull.enabled = false;\n    renderStateOptions.depthMask = false;\n    renderStateOptions.blending = BlendingState.ALPHA_BLEND;\n  }\n  const shaderBuilder = renderResources.shaderBuilder;\n  const uniformMap = renderResources.uniformMap;\n  if (defined(alphaOptions.alphaCutoff)) {\n    shaderBuilder.addDefine(\"ALPHA_MODE_MASK\", undefined, ShaderDestination.FRAGMENT);\n    shaderBuilder.addUniform(\"float\", \"u_alphaCutoff\", ShaderDestination.FRAGMENT);\n    uniformMap.u_alphaCutoff = function () {\n      return alphaOptions.alphaCutoff;\n    };\n  }\n};\nexport default AlphaPipelineStage;","map":{"version":3,"names":["defaultValue","defined","ShaderDestination","BlendingState","Pass","AlphaPipelineStage","name","process","renderResources","primitive","frameState","alphaOptions","model","pass","opaquePass","renderStateOptions","TRANSLUCENT","cull","enabled","depthMask","blending","ALPHA_BLEND","shaderBuilder","uniformMap","alphaCutoff","addDefine","undefined","FRAGMENT","addUniform","u_alphaCutoff"],"sources":["/Users/mac/Desktop/IWL_Fresh_Start/Lab4gps-Love-In-Action/node_modules/@cesium/engine/Source/Scene/Model/AlphaPipelineStage.js"],"sourcesContent":["import defaultValue from \"../../Core/defaultValue.js\";\nimport defined from \"../../Core/defined.js\";\nimport ShaderDestination from \"../../Renderer/ShaderDestination.js\";\nimport BlendingState from \"../BlendingState.js\";\nimport Pass from \"../../Renderer/Pass.js\";\n\n/**\n * A pipeline stage for configuring the alpha options for handling translucency.\n *\n * @namespace AlphaPipelineStage\n *\n * @private\n */\nconst AlphaPipelineStage = {\n  name: \"AlphaPipelineStage\", // Helps with debugging\n};\n\nAlphaPipelineStage.process = function (renderResources, primitive, frameState) {\n  const alphaOptions = renderResources.alphaOptions;\n\n  // Ensure the pass is defined\n  const model = renderResources.model;\n  alphaOptions.pass = defaultValue(alphaOptions.pass, model.opaquePass);\n\n  const renderStateOptions = renderResources.renderStateOptions;\n  if (alphaOptions.pass === Pass.TRANSLUCENT) {\n    renderStateOptions.cull.enabled = false;\n    renderStateOptions.depthMask = false;\n    renderStateOptions.blending = BlendingState.ALPHA_BLEND;\n  }\n\n  const shaderBuilder = renderResources.shaderBuilder;\n  const uniformMap = renderResources.uniformMap;\n\n  if (defined(alphaOptions.alphaCutoff)) {\n    shaderBuilder.addDefine(\n      \"ALPHA_MODE_MASK\",\n      undefined,\n      ShaderDestination.FRAGMENT,\n    );\n    shaderBuilder.addUniform(\n      \"float\",\n      \"u_alphaCutoff\",\n      ShaderDestination.FRAGMENT,\n    );\n    uniformMap.u_alphaCutoff = function () {\n      return alphaOptions.alphaCutoff;\n    };\n  }\n};\n\nexport default AlphaPipelineStage;\n"],"mappings":"AAAA,OAAOA,YAAY,MAAM,4BAA4B;AACrD,OAAOC,OAAO,MAAM,uBAAuB;AAC3C,OAAOC,iBAAiB,MAAM,qCAAqC;AACnE,OAAOC,aAAa,MAAM,qBAAqB;AAC/C,OAAOC,IAAI,MAAM,wBAAwB;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,kBAAkB,GAAG;EACzBC,IAAI,EAAE,oBAAoB,CAAE;AAC9B,CAAC;AAEDD,kBAAkB,CAACE,OAAO,GAAG,UAAUC,eAAe,EAAEC,SAAS,EAAEC,UAAU,EAAE;EAC7E,MAAMC,YAAY,GAAGH,eAAe,CAACG,YAAY;;EAEjD;EACA,MAAMC,KAAK,GAAGJ,eAAe,CAACI,KAAK;EACnCD,YAAY,CAACE,IAAI,GAAGb,YAAY,CAACW,YAAY,CAACE,IAAI,EAAED,KAAK,CAACE,UAAU,CAAC;EAErE,MAAMC,kBAAkB,GAAGP,eAAe,CAACO,kBAAkB;EAC7D,IAAIJ,YAAY,CAACE,IAAI,KAAKT,IAAI,CAACY,WAAW,EAAE;IAC1CD,kBAAkB,CAACE,IAAI,CAACC,OAAO,GAAG,KAAK;IACvCH,kBAAkB,CAACI,SAAS,GAAG,KAAK;IACpCJ,kBAAkB,CAACK,QAAQ,GAAGjB,aAAa,CAACkB,WAAW;EACzD;EAEA,MAAMC,aAAa,GAAGd,eAAe,CAACc,aAAa;EACnD,MAAMC,UAAU,GAAGf,eAAe,CAACe,UAAU;EAE7C,IAAItB,OAAO,CAACU,YAAY,CAACa,WAAW,CAAC,EAAE;IACrCF,aAAa,CAACG,SAAS,CACrB,iBAAiB,EACjBC,SAAS,EACTxB,iBAAiB,CAACyB,QACpB,CAAC;IACDL,aAAa,CAACM,UAAU,CACtB,OAAO,EACP,eAAe,EACf1B,iBAAiB,CAACyB,QACpB,CAAC;IACDJ,UAAU,CAACM,aAAa,GAAG,YAAY;MACrC,OAAOlB,YAAY,CAACa,WAAW;IACjC,CAAC;EACH;AACF,CAAC;AAED,eAAenB,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}