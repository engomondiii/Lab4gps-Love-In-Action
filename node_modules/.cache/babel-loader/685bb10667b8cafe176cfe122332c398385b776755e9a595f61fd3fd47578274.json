{"ast":null,"code":"import { version } from './version';\nimport { defaults, isBoolean, removeWithPredicate } from './utils';\nimport { AnchorTagBuilder } from './anchor-tag-builder';\nimport { HtmlTag } from './html-tag';\nimport { parseMatches } from './parser/parse-matches';\nimport { parseHtml } from './htmlParser/parse-html';\nimport { mentionServices } from './parser/mention-utils';\nimport { hashtagServices } from './parser/hashtag-utils';\n/**\n * @class Autolinker\n * @extends Object\n *\n * Utility class used to process a given string of text, and wrap the matches in\n * the appropriate anchor (&lt;a&gt;) tags to turn them into links.\n *\n * Any of the configuration options may be provided in an Object provided\n * to the Autolinker constructor, which will configure how the {@link #link link()}\n * method will process the links.\n *\n * For example:\n *\n *     var autolinker = new Autolinker( {\n *         newWindow : false,\n *         truncate  : 30\n *     } );\n *\n *     var html = autolinker.link( \"Joe went to www.yahoo.com\" );\n *     // produces: 'Joe went to <a href=\"http://www.yahoo.com\">yahoo.com</a>'\n *\n *\n * The {@link #static-link static link()} method may also be used to inline\n * options into a single call, which may be more convenient for one-off uses.\n * For example:\n *\n *     var html = Autolinker.link( \"Joe went to www.yahoo.com\", {\n *         newWindow : false,\n *         truncate  : 30\n *     } );\n *     // produces: 'Joe went to <a href=\"http://www.yahoo.com\">yahoo.com</a>'\n *\n *\n * ## Custom Replacements of Links\n *\n * If the configuration options do not provide enough flexibility, a {@link #replaceFn}\n * may be provided to fully customize the output of Autolinker. This function is\n * called once for each URL/Email/Phone#/Hashtag/Mention (Twitter, Instagram, Soundcloud)\n * match that is encountered.\n *\n * For example:\n *\n *     var input = \"...\";  // string with URLs, Email Addresses, Phone #s, Hashtags, and Mentions (Twitter, Instagram, Soundcloud)\n *\n *     var linkedText = Autolinker.link( input, {\n *         replaceFn : function( match ) {\n *             console.log( \"href = \", match.getAnchorHref() );\n *             console.log( \"text = \", match.getAnchorText() );\n *\n *             switch( match.getType() ) {\n *                 case 'url' :\n *                     console.log( \"url: \", match.getUrl() );\n *\n *                     if( match.getUrl().indexOf( 'mysite.com' ) === -1 ) {\n *                         var tag = match.buildTag();  // returns an `Autolinker.HtmlTag` instance, which provides mutator methods for easy changes\n *                         tag.setAttr( 'rel', 'nofollow' );\n *                         tag.addClass( 'external-link' );\n *\n *                         return tag;\n *\n *                     } else {\n *                         return true;  // let Autolinker perform its normal anchor tag replacement\n *                     }\n *\n *                 case 'email' :\n *                     var email = match.getEmail();\n *                     console.log( \"email: \", email );\n *\n *                     if( email === \"my@own.address\" ) {\n *                         return false;  // don't auto-link this particular email address; leave as-is\n *                     } else {\n *                         return;  // no return value will have Autolinker perform its normal anchor tag replacement (same as returning `true`)\n *                     }\n *\n *                 case 'phone' :\n *                     var phoneNumber = match.getPhoneNumber();\n *                     console.log( phoneNumber );\n *\n *                     return '<a href=\"http://newplace.to.link.phone.numbers.to/\">' + phoneNumber + '</a>';\n *\n *                 case 'hashtag' :\n *                     var hashtag = match.getHashtag();\n *                     console.log( hashtag );\n *\n *                     return '<a href=\"http://newplace.to.link.hashtag.handles.to/\">' + hashtag + '</a>';\n *\n *                 case 'mention' :\n *                     var mention = match.getMention();\n *                     console.log( mention );\n *\n *                     return '<a href=\"http://newplace.to.link.mention.to/\">' + mention + '</a>';\n *             }\n *         }\n *     } );\n *\n *\n * The function may return the following values:\n *\n * - `true` (Boolean): Allow Autolinker to replace the match as it normally\n *   would.\n * - `false` (Boolean): Do not replace the current match at all - leave as-is.\n * - Any String: If a string is returned from the function, the string will be\n *   used directly as the replacement HTML for the match.\n * - An {@link Autolinker.HtmlTag} instance, which can be used to build/modify\n *   an HTML tag before writing out its HTML text.\n */\nvar Autolinker = /** @class */function () {\n  /**\n   * @method constructor\n   * @param {Object} [cfg] The configuration options for the Autolinker instance,\n   *   specified in an Object (map).\n   */\n  function Autolinker(cfg) {\n    if (cfg === void 0) {\n      cfg = {};\n    }\n    /**\n     * The Autolinker version number exposed on the instance itself.\n     *\n     * Ex: 0.25.1\n     *\n     * @property {String} version\n     */\n    this.version = Autolinker.version;\n    /**\n     * @cfg {Boolean/Object} [urls]\n     *\n     * `true` if URLs should be automatically linked, `false` if they should not\n     * be. Defaults to `true`.\n     *\n     * Examples:\n     *\n     *     urls: true\n     *\n     *     // or\n     *\n     *     urls: {\n     *         schemeMatches : true,\n     *         tldMatches    : true,\n     *         ipV4Matches   : true\n     *     }\n     *\n     * As shown above, this option also accepts an Object form with 3 properties\n     * to allow for more customization of what exactly gets linked. All default\n     * to `true`:\n     *\n     * @cfg {Boolean} [urls.schemeMatches] `true` to match URLs found prefixed\n     *   with a scheme, i.e. `http://google.com`, or `other+scheme://google.com`,\n     *   `false` to prevent these types of matches.\n     * @cfg {Boolean} [urls.tldMatches] `true` to match URLs with known top\n     *   level domains (.com, .net, etc.) that are not prefixed with a scheme\n     *   (such as 'http://'). This option attempts to match anything that looks\n     *   like a URL in the given text. Ex: `google.com`, `asdf.org/?page=1`, etc.\n     *   `false` to prevent these types of matches.\n     * @cfg {Boolean} [urls.ipV4Matches] `true` to match IPv4 addresses in text\n     *   that are not prefixed with a scheme (such as 'http://'). This option\n     *   attempts to match anything that looks like an IPv4 address in text. Ex:\n     *   `192.168.0.1`, `10.0.0.1/?page=1`, etc. `false` to prevent these types\n     *   of matches.\n     */\n    this.urls = {}; // default value just to get the above doc comment in the ES5 output and documentation generator\n    /**\n     * @cfg {Boolean} [email=true]\n     *\n     * `true` if email addresses should be automatically linked, `false` if they\n     * should not be.\n     */\n    this.email = true; // default value just to get the above doc comment in the ES5 output and documentation generator\n    /**\n     * @cfg {Boolean} [phone=true]\n     *\n     * `true` if Phone numbers (\"(555)555-5555\") should be automatically linked,\n     * `false` if they should not be.\n     */\n    this.phone = true; // default value just to get the above doc comment in the ES5 output and documentation generator\n    /**\n     * @cfg {Boolean/String} [hashtag=false]\n     *\n     * A string for the service name to have hashtags (ex: \"#myHashtag\")\n     * auto-linked to. The currently-supported values are:\n     *\n     * - 'twitter'\n     * - 'facebook'\n     * - 'instagram'\n     *\n     * Pass `false` to skip auto-linking of hashtags.\n     */\n    this.hashtag = false; // default value just to get the above doc comment in the ES5 output and documentation generator\n    /**\n     * @cfg {String/Boolean} [mention=false]\n     *\n     * A string for the service name to have mentions (ex: \"@myuser\")\n     * auto-linked to. The currently supported values are:\n     *\n     * - 'twitter'\n     * - 'instagram'\n     * - 'soundcloud'\n     * - 'tiktok'\n     *\n     * Defaults to `false` to skip auto-linking of mentions.\n     */\n    this.mention = false; // default value just to get the above doc comment in the ES5 output and documentation generator\n    /**\n     * @cfg {Boolean} [newWindow=true]\n     *\n     * `true` if the links should open in a new window, `false` otherwise.\n     */\n    this.newWindow = true; // default value just to get the above doc comment in the ES5 output and documentation generator\n    /**\n     * @cfg {Boolean/Object} [stripPrefix=true]\n     *\n     * `true` if 'http://' (or 'https://') and/or the 'www.' should be stripped\n     * from the beginning of URL links' text, `false` otherwise. Defaults to\n     * `true`.\n     *\n     * Examples:\n     *\n     *     stripPrefix: true\n     *\n     *     // or\n     *\n     *     stripPrefix: {\n     *         scheme : true,\n     *         www    : true\n     *     }\n     *\n     * As shown above, this option also accepts an Object form with 2 properties\n     * to allow for more customization of what exactly is prevented from being\n     * displayed. Both default to `true`:\n     *\n     * @cfg {Boolean} [stripPrefix.scheme] `true` to prevent the scheme part of\n     *   a URL match from being displayed to the user. Example:\n     *   `'http://google.com'` will be displayed as `'google.com'`. `false` to\n     *   not strip the scheme. NOTE: Only an `'http://'` or `'https://'` scheme\n     *   will be removed, so as not to remove a potentially dangerous scheme\n     *   (such as `'file://'` or `'javascript:'`)\n     * @cfg {Boolean} [stripPrefix.www] www (Boolean): `true` to prevent the\n     *   `'www.'` part of a URL match from being displayed to the user. Ex:\n     *   `'www.google.com'` will be displayed as `'google.com'`. `false` to not\n     *   strip the `'www'`.\n     */\n    this.stripPrefix = {\n      scheme: true,\n      www: true\n    }; // default value just to get the above doc comment in the ES5 output and documentation generator\n    /**\n     * @cfg {Boolean} [stripTrailingSlash=true]\n     *\n     * `true` to remove the trailing slash from URL matches, `false` to keep\n     *  the trailing slash.\n     *\n     *  Example when `true`: `http://google.com/` will be displayed as\n     *  `http://google.com`.\n     */\n    this.stripTrailingSlash = true; // default value just to get the above doc comment in the ES5 output and documentation generator\n    /**\n     * @cfg {Boolean} [decodePercentEncoding=true]\n     *\n     * `true` to decode percent-encoded characters in URL matches, `false` to keep\n     *  the percent-encoded characters.\n     *\n     *  Example when `true`: `https://en.wikipedia.org/wiki/San_Jos%C3%A9` will\n     *  be displayed as `https://en.wikipedia.org/wiki/San_Jos√©`.\n     */\n    this.decodePercentEncoding = true; // default value just to get the above doc comment in the ES5 output and documentation generator\n    /**\n     * @cfg {Number/Object} [truncate=0]\n     *\n     * ## Number Form\n     *\n     * A number for how many characters matched text should be truncated to\n     * inside the text of a link. If the matched text is over this number of\n     * characters, it will be truncated to this length by adding a two period\n     * ellipsis ('..') to the end of the string.\n     *\n     * For example: A url like 'http://www.yahoo.com/some/long/path/to/a/file'\n     * truncated to 25 characters might look something like this:\n     * 'yahoo.com/some/long/pat..'\n     *\n     * Example Usage:\n     *\n     *     truncate: 25\n     *\n     *\n     *  Defaults to `0` for \"no truncation.\"\n     *\n     *\n     * ## Object Form\n     *\n     * An Object may also be provided with two properties: `length` (Number) and\n     * `location` (String). `location` may be one of the following: 'end'\n     * (default), 'middle', or 'smart'.\n     *\n     * Example Usage:\n     *\n     *     truncate: { length: 25, location: 'middle' }\n     *\n     * @cfg {Number} [truncate.length=0] How many characters to allow before\n     *   truncation will occur. Defaults to `0` for \"no truncation.\"\n     * @cfg {\"end\"/\"middle\"/\"smart\"} [truncate.location=\"end\"]\n     *\n     * - 'end' (default): will truncate up to the number of characters, and then\n     *   add an ellipsis at the end. Ex: 'yahoo.com/some/long/pat..'\n     * - 'middle': will truncate and add the ellipsis in the middle. Ex:\n     *   'yahoo.com/s..th/to/a/file'\n     * - 'smart': for URLs where the algorithm attempts to strip out unnecessary\n     *   parts first (such as the 'www.', then URL scheme, hash, etc.),\n     *   attempting to make the URL human-readable before looking for a good\n     *   point to insert the ellipsis if it is still too long. Ex:\n     *   'yahoo.com/some..to/a/file'. For more details, see\n     *   {@link Autolinker.truncate.TruncateSmart}.\n     */\n    this.truncate = {\n      length: 0,\n      location: 'end'\n    }; // default value just to get the above doc comment in the ES5 output and documentation generator\n    /**\n     * @cfg {String} className\n     *\n     * A CSS class name to add to the generated links. This class will be added\n     * to all links, as well as this class plus match suffixes for styling\n     * url/email/phone/hashtag/mention links differently.\n     *\n     * For example, if this config is provided as \"myLink\", then:\n     *\n     * - URL links will have the CSS classes: \"myLink myLink-url\"\n     * - Email links will have the CSS classes: \"myLink myLink-email\", and\n     * - Phone links will have the CSS classes: \"myLink myLink-phone\"\n     * - Hashtag links will have the CSS classes: \"myLink myLink-hashtag\"\n     * - Mention links will have the CSS classes: \"myLink myLink-mention myLink-[type]\"\n     *   where [type] is either \"instagram\", \"twitter\" or \"soundcloud\"\n     */\n    this.className = ''; // default value just to get the above doc comment in the ES5 output and documentation generator\n    /**\n     * @cfg {Function} replaceFn\n     *\n     * A function to individually process each match found in the input string.\n     *\n     * See the class's description for usage.\n     *\n     * The `replaceFn` can be called with a different context object (`this`\n     * reference) using the {@link #context} cfg.\n     *\n     * This function is called with the following parameter:\n     *\n     * @cfg {Autolinker.match.Match} replaceFn.match The Match instance which\n     *   can be used to retrieve information about the match that the `replaceFn`\n     *   is currently processing. See {@link Autolinker.match.Match} subclasses\n     *   for details.\n     */\n    this.replaceFn = null; // default value just to get the above doc comment in the ES5 output and documentation generator\n    /**\n     * @cfg {Object} context\n     *\n     * The context object (`this` reference) to call the `replaceFn` with.\n     *\n     * Defaults to this Autolinker instance.\n     */\n    this.context = undefined; // default value just to get the above doc comment in the ES5 output and documentation generator\n    /**\n     * @cfg {Boolean} [sanitizeHtml=false]\n     *\n     * `true` to HTML-encode the start and end brackets of existing HTML tags found\n     * in the input string. This will escape `<` and `>` characters to `&lt;` and\n     * `&gt;`, respectively.\n     *\n     * Setting this to `true` will prevent XSS (Cross-site Scripting) attacks,\n     * but will remove the significance of existing HTML tags in the input string. If\n     * you would like to maintain the significance of existing HTML tags while also\n     * making the output HTML string safe, leave this option as `false` and use a\n     * tool like https://github.com/cure53/DOMPurify (or others) on the input string\n     * before running Autolinker.\n     */\n    this.sanitizeHtml = false; // default value just to get the above doc comment in the ES5 output and documentation generator\n    /**\n     * @private\n     * @property {Autolinker.AnchorTagBuilder} tagBuilder\n     *\n     * The AnchorTagBuilder instance used to build match replacement anchor tags.\n     * Note: this is lazily instantiated in the {@link #getTagBuilder} method.\n     */\n    this.tagBuilder = null;\n    // Note: when `this.something` is used in the rhs of these assignments,\n    //       it refers to the default values set above the constructor\n    this.urls = normalizeUrlsCfg(cfg.urls);\n    this.email = isBoolean(cfg.email) ? cfg.email : this.email;\n    this.phone = isBoolean(cfg.phone) ? cfg.phone : this.phone;\n    this.hashtag = cfg.hashtag || this.hashtag;\n    this.mention = cfg.mention || this.mention;\n    this.newWindow = isBoolean(cfg.newWindow) ? cfg.newWindow : this.newWindow;\n    this.stripPrefix = normalizeStripPrefixCfg(cfg.stripPrefix);\n    this.stripTrailingSlash = isBoolean(cfg.stripTrailingSlash) ? cfg.stripTrailingSlash : this.stripTrailingSlash;\n    this.decodePercentEncoding = isBoolean(cfg.decodePercentEncoding) ? cfg.decodePercentEncoding : this.decodePercentEncoding;\n    this.sanitizeHtml = cfg.sanitizeHtml || false;\n    // Validate the value of the `mention` cfg\n    var mention = this.mention;\n    if (mention !== false && mentionServices.indexOf(mention) === -1) {\n      throw new Error(\"invalid `mention` cfg '\".concat(mention, \"' - see docs\"));\n    }\n    // Validate the value of the `hashtag` cfg\n    var hashtag = this.hashtag;\n    if (hashtag !== false && hashtagServices.indexOf(hashtag) === -1) {\n      throw new Error(\"invalid `hashtag` cfg '\".concat(hashtag, \"' - see docs\"));\n    }\n    this.truncate = normalizeTruncateCfg(cfg.truncate);\n    this.className = cfg.className || this.className;\n    this.replaceFn = cfg.replaceFn || this.replaceFn;\n    this.context = cfg.context || this;\n  }\n  /**\n   * Automatically links URLs, Email addresses, Phone Numbers, Twitter handles,\n   * Hashtags, and Mentions found in the given chunk of HTML. Does not link URLs\n   * found within HTML tags.\n   *\n   * For instance, if given the text: `You should go to http://www.yahoo.com`,\n   * then the result will be `You should go to &lt;a href=\"http://www.yahoo.com\"&gt;http://www.yahoo.com&lt;/a&gt;`\n   *\n   * Example:\n   *\n   *     var linkedText = Autolinker.link( \"Go to google.com\", { newWindow: false } );\n   *     // Produces: \"Go to <a href=\"http://google.com\">google.com</a>\"\n   *\n   * @static\n   * @param {String} textOrHtml The HTML or text to find matches within (depending\n   *   on if the {@link #urls}, {@link #email}, {@link #phone}, {@link #mention},\n   *   {@link #hashtag}, and {@link #mention} options are enabled).\n   * @param {Object} [options] Any of the configuration options for the Autolinker\n   *   class, specified in an Object (map). See the class description for an\n   *   example call.\n   * @return {String} The HTML text, with matches automatically linked.\n   */\n  Autolinker.link = function (textOrHtml, options) {\n    var autolinker = new Autolinker(options);\n    return autolinker.link(textOrHtml);\n  };\n  /**\n   * Parses the input `textOrHtml` looking for URLs, email addresses, phone\n   * numbers, username handles, and hashtags (depending on the configuration\n   * of the Autolinker instance), and returns an array of {@link Autolinker.match.Match}\n   * objects describing those matches (without making any replacements).\n   *\n   * Note that if parsing multiple pieces of text, it is slightly more efficient\n   * to create an Autolinker instance, and use the instance-level {@link #parse}\n   * method.\n   *\n   * Example:\n   *\n   *     var matches = Autolinker.parse( \"Hello google.com, I am asdf@asdf.com\", {\n   *         urls: true,\n   *         email: true\n   *     } );\n   *\n   *     console.log( matches.length );           // 2\n   *     console.log( matches[ 0 ].getType() );   // 'url'\n   *     console.log( matches[ 0 ].getUrl() );    // 'google.com'\n   *     console.log( matches[ 1 ].getType() );   // 'email'\n   *     console.log( matches[ 1 ].getEmail() );  // 'asdf@asdf.com'\n   *\n   * @static\n   * @param {String} textOrHtml The HTML or text to find matches within\n   *   (depending on if the {@link #urls}, {@link #email}, {@link #phone},\n   *   {@link #hashtag}, and {@link #mention} options are enabled).\n   * @param {Object} [options] Any of the configuration options for the Autolinker\n   *   class, specified in an Object (map). See the class description for an\n   *   example call.\n   * @return {Autolinker.match.Match[]} The array of Matches found in the\n   *   given input `textOrHtml`.\n   */\n  Autolinker.parse = function (textOrHtml, options) {\n    var autolinker = new Autolinker(options);\n    return autolinker.parse(textOrHtml);\n  };\n  /**\n   * Parses the input `textOrHtml` looking for URLs, email addresses, phone\n   * numbers, username handles, and hashtags (depending on the configuration\n   * of the Autolinker instance), and returns an array of {@link Autolinker.match.Match}\n   * objects describing those matches (without making any replacements).\n   *\n   * This method is used by the {@link #link} method, but can also be used to\n   * simply do parsing of the input in order to discover what kinds of links\n   * there are and how many.\n   *\n   * Example usage:\n   *\n   *     var autolinker = new Autolinker( {\n   *         urls: true,\n   *         email: true\n   *     } );\n   *\n   *     var matches = autolinker.parse( \"Hello google.com, I am asdf@asdf.com\" );\n   *\n   *     console.log( matches.length );           // 2\n   *     console.log( matches[ 0 ].getType() );   // 'url'\n   *     console.log( matches[ 0 ].getUrl() );    // 'google.com'\n   *     console.log( matches[ 1 ].getType() );   // 'email'\n   *     console.log( matches[ 1 ].getEmail() );  // 'asdf@asdf.com'\n   *\n   * @param {String} textOrHtml The HTML or text to find matches within\n   *   (depending on if the {@link #urls}, {@link #email}, {@link #phone},\n   *   {@link #hashtag}, and {@link #mention} options are enabled).\n   * @return {Autolinker.match.Match[]} The array of Matches found in the\n   *   given input `textOrHtml`.\n   */\n  Autolinker.prototype.parse = function (textOrHtml) {\n    var _this = this;\n    var skipTagNames = ['a', 'style', 'script'],\n      skipTagsStackCount = 0,\n      // used to only Autolink text outside of anchor/script/style tags. We don't want to autolink something that is already linked inside of an <a> tag, for instance\n      matches = [];\n    // Find all matches within the `textOrHtml` (but not matches that are\n    // already nested within <a>, <style> and <script> tags)\n    parseHtml(textOrHtml, {\n      onOpenTag: function (tagName) {\n        if (skipTagNames.indexOf(tagName) >= 0) {\n          skipTagsStackCount++;\n        }\n      },\n      onText: function (text, offset) {\n        // Only process text nodes that are not within an <a>, <style> or <script> tag\n        if (skipTagsStackCount === 0) {\n          // \"Walk around\" common HTML entities. An '&nbsp;' (for example)\n          // could be at the end of a URL, but we don't want to\n          // include the trailing '&' in the URL. See issue #76\n          // TODO: Handle HTML entities separately in parseHtml() and\n          // don't emit them as \"text\" except for &amp; entities\n          var htmlCharacterEntitiesRegex = /(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi; // NOTE: capturing group is significant to include the split characters in the .split() call below\n          var textSplit = text.split(htmlCharacterEntitiesRegex);\n          var currentOffset_1 = offset;\n          textSplit.forEach(function (splitText, i) {\n            // even number matches are text, odd numbers are html entities\n            if (i % 2 === 0) {\n              var textNodeMatches = _this.parseText(splitText, currentOffset_1);\n              matches.push.apply(matches, textNodeMatches);\n            }\n            currentOffset_1 += splitText.length;\n          });\n        }\n      },\n      onCloseTag: function (tagName) {\n        if (skipTagNames.indexOf(tagName) >= 0) {\n          skipTagsStackCount = Math.max(skipTagsStackCount - 1, 0); // attempt to handle extraneous </a> tags by making sure the stack count never goes below 0\n        }\n      },\n      onComment: function (_offset) {},\n      onDoctype: function (_offset) {} // no need to process doctype nodes\n    });\n    // After we have found all matches, remove subsequent matches that\n    // overlap with a previous match. This can happen for instance with URLs,\n    // where the url 'google.com/#link' would match '#link' as a hashtag.\n    matches = this.compactMatches(matches);\n    // And finally, remove matches for match types that have been turned\n    // off. We needed to have all match types turned on initially so that\n    // things like hashtags could be filtered out if they were really just\n    // part of a URL match (for instance, as a named anchor).\n    matches = this.removeUnwantedMatches(matches);\n    return matches;\n  };\n  /**\n   * After we have found all matches, we need to remove matches that overlap\n   * with a previous match. This can happen for instance with URLs, where the\n   * url 'google.com/#link' would match '#link' as a hashtag. Because the\n   * '#link' part is contained in a larger match that comes before the HashTag\n   * match, we'll remove the HashTag match.\n   *\n   * @private\n   * @param {Autolinker.match.Match[]} matches\n   * @return {Autolinker.match.Match[]}\n   */\n  Autolinker.prototype.compactMatches = function (matches) {\n    // First, the matches need to be sorted in order of offset\n    matches.sort(function (a, b) {\n      return a.getOffset() - b.getOffset();\n    });\n    var i = 0;\n    while (i < matches.length - 1) {\n      var match = matches[i],\n        offset = match.getOffset(),\n        matchedTextLength = match.getMatchedText().length,\n        endIdx = offset + matchedTextLength;\n      if (i + 1 < matches.length) {\n        // Remove subsequent matches that equal offset with current match\n        if (matches[i + 1].getOffset() === offset) {\n          var removeIdx = matches[i + 1].getMatchedText().length > matchedTextLength ? i : i + 1;\n          matches.splice(removeIdx, 1);\n          continue;\n        }\n        // Remove subsequent matches that overlap with the current match\n        if (matches[i + 1].getOffset() < endIdx) {\n          matches.splice(i + 1, 1);\n          continue;\n        }\n      }\n      i++;\n    }\n    return matches;\n  };\n  /**\n   * Removes matches for matchers that were turned off in the options. For\n   * example, if {@link #hashtag hashtags} were not to be matched, we'll\n   * remove them from the `matches` array here.\n   *\n   * Note: we *must* use all Matchers on the input string, and then filter\n   * them out later. For example, if the options were `{ url: false, hashtag: true }`,\n   * we wouldn't want to match the text '#link' as a HashTag inside of the text\n   * 'google.com/#link'. The way the algorithm works is that we match the full\n   * URL first (which prevents the accidental HashTag match), and then we'll\n   * simply throw away the URL match.\n   *\n   * @private\n   * @param {Autolinker.match.Match[]} matches The array of matches to remove\n   *   the unwanted matches from. Note: this array is mutated for the\n   *   removals.\n   * @return {Autolinker.match.Match[]} The mutated input `matches` array.\n   */\n  Autolinker.prototype.removeUnwantedMatches = function (matches) {\n    if (!this.hashtag) removeWithPredicate(matches, function (match) {\n      return match.getType() === 'hashtag';\n    });\n    if (!this.email) removeWithPredicate(matches, function (match) {\n      return match.getType() === 'email';\n    });\n    if (!this.phone) removeWithPredicate(matches, function (match) {\n      return match.getType() === 'phone';\n    });\n    if (!this.mention) removeWithPredicate(matches, function (match) {\n      return match.getType() === 'mention';\n    });\n    if (!this.urls.schemeMatches) {\n      removeWithPredicate(matches, function (m) {\n        return m.getType() === 'url' && m.getUrlMatchType() === 'scheme';\n      });\n    }\n    if (!this.urls.tldMatches) {\n      removeWithPredicate(matches, function (m) {\n        return m.getType() === 'url' && m.getUrlMatchType() === 'tld';\n      });\n    }\n    if (!this.urls.ipV4Matches) {\n      removeWithPredicate(matches, function (m) {\n        return m.getType() === 'url' && m.getUrlMatchType() === 'ipV4';\n      });\n    }\n    return matches;\n  };\n  /**\n   * Parses the input `text` looking for URLs, email addresses, phone\n   * numbers, username handles, and hashtags (depending on the configuration\n   * of the Autolinker instance), and returns an array of {@link Autolinker.match.Match}\n   * objects describing those matches.\n   *\n   * This method processes a **non-HTML string**, and is used to parse and\n   * match within the text nodes of an HTML string. This method is used\n   * internally by {@link #parse}.\n   *\n   * @private\n   * @param {String} text The text to find matches within (depending on if the\n   *   {@link #urls}, {@link #email}, {@link #phone},\n   *   {@link #hashtag}, and {@link #mention} options are enabled). This must be a non-HTML string.\n   * @param {Number} [offset=0] The offset of the text node within the\n   *   original string. This is used when parsing with the {@link #parse}\n   *   method to generate correct offsets within the {@link Autolinker.match.Match}\n   *   instances, but may be omitted if calling this method publicly.\n   * @return {Autolinker.match.Match[]} The array of Matches found in the\n   *   given input `text`.\n   */\n  Autolinker.prototype.parseText = function (text, offset) {\n    if (offset === void 0) {\n      offset = 0;\n    }\n    offset = offset || 0;\n    var matches = parseMatches(text, {\n      tagBuilder: this.getTagBuilder(),\n      stripPrefix: this.stripPrefix,\n      stripTrailingSlash: this.stripTrailingSlash,\n      decodePercentEncoding: this.decodePercentEncoding,\n      hashtagServiceName: this.hashtag,\n      mentionServiceName: this.mention || 'twitter'\n    });\n    // Correct the offset of each of the matches. They are originally\n    // the offset of the match within the provided text node, but we\n    // need to correct them to be relative to the original HTML input\n    // string (i.e. the one provided to #parse).\n    for (var i = 0, numTextMatches = matches.length; i < numTextMatches; i++) {\n      matches[i].setOffset(offset + matches[i].getOffset());\n    }\n    return matches;\n  };\n  /**\n   * Automatically links URLs, Email addresses, Phone numbers, Hashtags,\n   * and Mentions (Twitter, Instagram, Soundcloud) found in the given chunk of HTML. Does not link\n   * URLs found within HTML tags.\n   *\n   * For instance, if given the text: `You should go to http://www.yahoo.com`,\n   * then the result will be `You should go to\n   * &lt;a href=\"http://www.yahoo.com\"&gt;http://www.yahoo.com&lt;/a&gt;`\n   *\n   * This method finds the text around any HTML elements in the input\n   * `textOrHtml`, which will be the text that is processed. Any original HTML\n   * elements will be left as-is, as well as the text that is already wrapped\n   * in anchor (&lt;a&gt;) tags.\n   *\n   * @param {String} textOrHtml The HTML or text to autolink matches within\n   *   (depending on if the {@link #urls}, {@link #email}, {@link #phone}, {@link #hashtag}, and {@link #mention} options are enabled).\n   * @return {String} The HTML, with matches automatically linked.\n   */\n  Autolinker.prototype.link = function (textOrHtml) {\n    if (!textOrHtml) {\n      return '';\n    } // handle `null` and `undefined` (for JavaScript users that don't have TypeScript support)\n    /* We would want to sanitize the start and end characters of a tag\n     * before processing the string in order to avoid an XSS scenario.\n     * This behaviour can be changed by toggling the sanitizeHtml option.\n     */\n    if (this.sanitizeHtml) {\n      textOrHtml = textOrHtml.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n    }\n    var matches = this.parse(textOrHtml),\n      newHtml = [],\n      lastIndex = 0;\n    for (var i = 0, len = matches.length; i < len; i++) {\n      var match = matches[i];\n      newHtml.push(textOrHtml.substring(lastIndex, match.getOffset()));\n      newHtml.push(this.createMatchReturnVal(match));\n      lastIndex = match.getOffset() + match.getMatchedText().length;\n    }\n    newHtml.push(textOrHtml.substring(lastIndex)); // handle the text after the last match\n    return newHtml.join('');\n  };\n  /**\n   * Creates the return string value for a given match in the input string.\n   *\n   * This method handles the {@link #replaceFn}, if one was provided.\n   *\n   * @private\n   * @param {Autolinker.match.Match} match The Match object that represents\n   *   the match.\n   * @return {String} The string that the `match` should be replaced with.\n   *   This is usually the anchor tag string, but may be the `matchStr` itself\n   *   if the match is not to be replaced.\n   */\n  Autolinker.prototype.createMatchReturnVal = function (match) {\n    // Handle a custom `replaceFn` being provided\n    var replaceFnResult;\n    if (this.replaceFn) {\n      replaceFnResult = this.replaceFn.call(this.context, match); // Autolinker instance is the context\n    }\n    if (typeof replaceFnResult === 'string') {\n      return replaceFnResult; // `replaceFn` returned a string, use that\n    } else if (replaceFnResult === false) {\n      return match.getMatchedText(); // no replacement for the match\n    } else if (replaceFnResult instanceof HtmlTag) {\n      return replaceFnResult.toAnchorString();\n    } else {\n      // replaceFnResult === true, or no/unknown return value from function\n      // Perform Autolinker's default anchor tag generation\n      var anchorTag = match.buildTag(); // returns an Autolinker.HtmlTag instance\n      return anchorTag.toAnchorString();\n    }\n  };\n  /**\n   * Returns the {@link #tagBuilder} instance for this Autolinker instance,\n   * lazily instantiating it if it does not yet exist.\n   *\n   * @private\n   * @return {Autolinker.AnchorTagBuilder}\n   */\n  Autolinker.prototype.getTagBuilder = function () {\n    var tagBuilder = this.tagBuilder;\n    if (!tagBuilder) {\n      tagBuilder = this.tagBuilder = new AnchorTagBuilder({\n        newWindow: this.newWindow,\n        truncate: this.truncate,\n        className: this.className\n      });\n    }\n    return tagBuilder;\n  };\n  // NOTE: must be 'export default' here for UMD module\n  /**\n   * @static\n   * @property {String} version\n   *\n   * The Autolinker version number in the form major.minor.patch\n   *\n   * Ex: 3.15.0\n   */\n  Autolinker.version = version;\n  return Autolinker;\n}();\nexport default Autolinker;\n/**\n * Normalizes the {@link #urls} config into an Object with its 2 properties:\n * `schemeMatches` and `tldMatches`, both booleans.\n *\n * See {@link #urls} config for details.\n *\n * @private\n * @param {Boolean/Object} urls\n * @return {Object}\n */\nfunction normalizeUrlsCfg(urls) {\n  if (urls == null) urls = true; // default to `true`\n  if (isBoolean(urls)) {\n    return {\n      schemeMatches: urls,\n      tldMatches: urls,\n      ipV4Matches: urls\n    };\n  } else {\n    // object form\n    return {\n      schemeMatches: isBoolean(urls.schemeMatches) ? urls.schemeMatches : true,\n      tldMatches: isBoolean(urls.tldMatches) ? urls.tldMatches : true,\n      ipV4Matches: isBoolean(urls.ipV4Matches) ? urls.ipV4Matches : true\n    };\n  }\n}\n/**\n * Normalizes the {@link #stripPrefix} config into an Object with 2\n * properties: `scheme`, and `www` - both Booleans.\n *\n * See {@link #stripPrefix} config for details.\n *\n * @private\n * @param {Boolean/Object} stripPrefix\n * @return {Object}\n */\nfunction normalizeStripPrefixCfg(stripPrefix) {\n  if (stripPrefix == null) stripPrefix = true; // default to `true`\n  if (isBoolean(stripPrefix)) {\n    return {\n      scheme: stripPrefix,\n      www: stripPrefix\n    };\n  } else {\n    // object form\n    return {\n      scheme: isBoolean(stripPrefix.scheme) ? stripPrefix.scheme : true,\n      www: isBoolean(stripPrefix.www) ? stripPrefix.www : true\n    };\n  }\n}\n/**\n * Normalizes the {@link #truncate} config into an Object with 2 properties:\n * `length` (Number), and `location` (String).\n *\n * See {@link #truncate} config for details.\n *\n * @private\n * @param {Number/Object} truncate\n * @return {Object}\n */\nfunction normalizeTruncateCfg(truncate) {\n  if (typeof truncate === 'number') {\n    return {\n      length: truncate,\n      location: 'end'\n    };\n  } else {\n    // object, or undefined/null\n    return defaults(truncate || {}, {\n      length: Number.POSITIVE_INFINITY,\n      location: 'end'\n    });\n  }\n}","map":{"version":3,"names":["version","defaults","isBoolean","removeWithPredicate","AnchorTagBuilder","HtmlTag","parseMatches","parseHtml","mentionServices","hashtagServices","Autolinker","cfg","urls","email","phone","hashtag","mention","newWindow","stripPrefix","scheme","www","stripTrailingSlash","decodePercentEncoding","truncate","length","location","className","replaceFn","context","undefined","sanitizeHtml","tagBuilder","normalizeUrlsCfg","normalizeStripPrefixCfg","indexOf","Error","concat","normalizeTruncateCfg","link","textOrHtml","options","autolinker","parse","prototype","_this","skipTagNames","skipTagsStackCount","matches","onOpenTag","tagName","onText","text","offset","htmlCharacterEntitiesRegex","textSplit","split","currentOffset_1","forEach","splitText","i","textNodeMatches","parseText","push","apply","onCloseTag","Math","max","onComment","_offset","onDoctype","compactMatches","removeUnwantedMatches","sort","a","b","getOffset","match","matchedTextLength","getMatchedText","endIdx","removeIdx","splice","getType","schemeMatches","m","getUrlMatchType","tldMatches","ipV4Matches","getTagBuilder","hashtagServiceName","mentionServiceName","numTextMatches","setOffset","replace","newHtml","lastIndex","len","substring","createMatchReturnVal","join","replaceFnResult","call","toAnchorString","anchorTag","buildTag","Number","POSITIVE_INFINITY"],"sources":["../../src/autolinker.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}