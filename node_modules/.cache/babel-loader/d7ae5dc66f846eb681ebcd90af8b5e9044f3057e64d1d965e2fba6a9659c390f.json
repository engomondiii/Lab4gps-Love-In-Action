{"ast":null,"code":"import defined from \"../Core/defined.js\";\nimport DoublyLinkedList from \"../Core/DoublyLinkedList.js\";\n\n/**\n * Stores tiles with content loaded.\n *\n * @private\n */\nfunction Cesium3DTilesetCache() {\n  // [head, sentinel) -> tiles that weren't selected this frame and may be removed from the cache\n  // (sentinel, tail] -> tiles that were selected this frame\n  this._list = new DoublyLinkedList();\n  this._sentinel = this._list.add();\n  this._trimTiles = false;\n}\nCesium3DTilesetCache.prototype.reset = function () {\n  // Move sentinel node to the tail so, at the start of the frame, all tiles\n  // may be potentially replaced.  Tiles are moved to the right of the sentinel\n  // when they are selected so they will not be replaced.\n  this._list.splice(this._list.tail, this._sentinel);\n};\nCesium3DTilesetCache.prototype.touch = function (tile) {\n  const node = tile.cacheNode;\n  if (defined(node)) {\n    this._list.splice(this._sentinel, node);\n  }\n};\nCesium3DTilesetCache.prototype.add = function (tile) {\n  if (!defined(tile.cacheNode)) {\n    tile.cacheNode = this._list.add(tile);\n  }\n};\nCesium3DTilesetCache.prototype.unloadTile = function (tileset, tile, unloadCallback) {\n  const node = tile.cacheNode;\n  if (!defined(node)) {\n    return;\n  }\n  this._list.remove(node);\n  tile.cacheNode = undefined;\n  unloadCallback(tileset, tile);\n};\nCesium3DTilesetCache.prototype.unloadTiles = function (tileset, unloadCallback) {\n  const trimTiles = this._trimTiles;\n  this._trimTiles = false;\n  const list = this._list;\n\n  // Traverse the list only to the sentinel since tiles/nodes to the\n  // right of the sentinel were used this frame.\n  //\n  // The sub-list to the left of the sentinel is ordered from LRU to MRU.\n  const sentinel = this._sentinel;\n  let node = list.head;\n  while (node !== sentinel && (tileset.totalMemoryUsageInBytes > tileset.cacheBytes || trimTiles)) {\n    const tile = node.item;\n    node = node.next;\n    this.unloadTile(tileset, tile, unloadCallback);\n  }\n};\nCesium3DTilesetCache.prototype.trim = function () {\n  this._trimTiles = true;\n};\nexport default Cesium3DTilesetCache;","map":{"version":3,"names":["defined","DoublyLinkedList","Cesium3DTilesetCache","_list","_sentinel","add","_trimTiles","prototype","reset","splice","tail","touch","tile","node","cacheNode","unloadTile","tileset","unloadCallback","remove","undefined","unloadTiles","trimTiles","list","sentinel","head","totalMemoryUsageInBytes","cacheBytes","item","next","trim"],"sources":["/Users/mac/Desktop/IWL_Fresh_Start/Lab4gps-Love-In-Action/node_modules/@cesium/engine/Source/Scene/Cesium3DTilesetCache.js"],"sourcesContent":["import defined from \"../Core/defined.js\";\nimport DoublyLinkedList from \"../Core/DoublyLinkedList.js\";\n\n/**\n * Stores tiles with content loaded.\n *\n * @private\n */\nfunction Cesium3DTilesetCache() {\n  // [head, sentinel) -> tiles that weren't selected this frame and may be removed from the cache\n  // (sentinel, tail] -> tiles that were selected this frame\n  this._list = new DoublyLinkedList();\n  this._sentinel = this._list.add();\n  this._trimTiles = false;\n}\n\nCesium3DTilesetCache.prototype.reset = function () {\n  // Move sentinel node to the tail so, at the start of the frame, all tiles\n  // may be potentially replaced.  Tiles are moved to the right of the sentinel\n  // when they are selected so they will not be replaced.\n  this._list.splice(this._list.tail, this._sentinel);\n};\n\nCesium3DTilesetCache.prototype.touch = function (tile) {\n  const node = tile.cacheNode;\n  if (defined(node)) {\n    this._list.splice(this._sentinel, node);\n  }\n};\n\nCesium3DTilesetCache.prototype.add = function (tile) {\n  if (!defined(tile.cacheNode)) {\n    tile.cacheNode = this._list.add(tile);\n  }\n};\n\nCesium3DTilesetCache.prototype.unloadTile = function (\n  tileset,\n  tile,\n  unloadCallback,\n) {\n  const node = tile.cacheNode;\n  if (!defined(node)) {\n    return;\n  }\n\n  this._list.remove(node);\n  tile.cacheNode = undefined;\n  unloadCallback(tileset, tile);\n};\n\nCesium3DTilesetCache.prototype.unloadTiles = function (\n  tileset,\n  unloadCallback,\n) {\n  const trimTiles = this._trimTiles;\n  this._trimTiles = false;\n\n  const list = this._list;\n\n  // Traverse the list only to the sentinel since tiles/nodes to the\n  // right of the sentinel were used this frame.\n  //\n  // The sub-list to the left of the sentinel is ordered from LRU to MRU.\n  const sentinel = this._sentinel;\n  let node = list.head;\n  while (\n    node !== sentinel &&\n    (tileset.totalMemoryUsageInBytes > tileset.cacheBytes || trimTiles)\n  ) {\n    const tile = node.item;\n    node = node.next;\n    this.unloadTile(tileset, tile, unloadCallback);\n  }\n};\n\nCesium3DTilesetCache.prototype.trim = function () {\n  this._trimTiles = true;\n};\nexport default Cesium3DTilesetCache;\n"],"mappings":"AAAA,OAAOA,OAAO,MAAM,oBAAoB;AACxC,OAAOC,gBAAgB,MAAM,6BAA6B;;AAE1D;AACA;AACA;AACA;AACA;AACA,SAASC,oBAAoBA,CAAA,EAAG;EAC9B;EACA;EACA,IAAI,CAACC,KAAK,GAAG,IAAIF,gBAAgB,CAAC,CAAC;EACnC,IAAI,CAACG,SAAS,GAAG,IAAI,CAACD,KAAK,CAACE,GAAG,CAAC,CAAC;EACjC,IAAI,CAACC,UAAU,GAAG,KAAK;AACzB;AAEAJ,oBAAoB,CAACK,SAAS,CAACC,KAAK,GAAG,YAAY;EACjD;EACA;EACA;EACA,IAAI,CAACL,KAAK,CAACM,MAAM,CAAC,IAAI,CAACN,KAAK,CAACO,IAAI,EAAE,IAAI,CAACN,SAAS,CAAC;AACpD,CAAC;AAEDF,oBAAoB,CAACK,SAAS,CAACI,KAAK,GAAG,UAAUC,IAAI,EAAE;EACrD,MAAMC,IAAI,GAAGD,IAAI,CAACE,SAAS;EAC3B,IAAId,OAAO,CAACa,IAAI,CAAC,EAAE;IACjB,IAAI,CAACV,KAAK,CAACM,MAAM,CAAC,IAAI,CAACL,SAAS,EAAES,IAAI,CAAC;EACzC;AACF,CAAC;AAEDX,oBAAoB,CAACK,SAAS,CAACF,GAAG,GAAG,UAAUO,IAAI,EAAE;EACnD,IAAI,CAACZ,OAAO,CAACY,IAAI,CAACE,SAAS,CAAC,EAAE;IAC5BF,IAAI,CAACE,SAAS,GAAG,IAAI,CAACX,KAAK,CAACE,GAAG,CAACO,IAAI,CAAC;EACvC;AACF,CAAC;AAEDV,oBAAoB,CAACK,SAAS,CAACQ,UAAU,GAAG,UAC1CC,OAAO,EACPJ,IAAI,EACJK,cAAc,EACd;EACA,MAAMJ,IAAI,GAAGD,IAAI,CAACE,SAAS;EAC3B,IAAI,CAACd,OAAO,CAACa,IAAI,CAAC,EAAE;IAClB;EACF;EAEA,IAAI,CAACV,KAAK,CAACe,MAAM,CAACL,IAAI,CAAC;EACvBD,IAAI,CAACE,SAAS,GAAGK,SAAS;EAC1BF,cAAc,CAACD,OAAO,EAAEJ,IAAI,CAAC;AAC/B,CAAC;AAEDV,oBAAoB,CAACK,SAAS,CAACa,WAAW,GAAG,UAC3CJ,OAAO,EACPC,cAAc,EACd;EACA,MAAMI,SAAS,GAAG,IAAI,CAACf,UAAU;EACjC,IAAI,CAACA,UAAU,GAAG,KAAK;EAEvB,MAAMgB,IAAI,GAAG,IAAI,CAACnB,KAAK;;EAEvB;EACA;EACA;EACA;EACA,MAAMoB,QAAQ,GAAG,IAAI,CAACnB,SAAS;EAC/B,IAAIS,IAAI,GAAGS,IAAI,CAACE,IAAI;EACpB,OACEX,IAAI,KAAKU,QAAQ,KAChBP,OAAO,CAACS,uBAAuB,GAAGT,OAAO,CAACU,UAAU,IAAIL,SAAS,CAAC,EACnE;IACA,MAAMT,IAAI,GAAGC,IAAI,CAACc,IAAI;IACtBd,IAAI,GAAGA,IAAI,CAACe,IAAI;IAChB,IAAI,CAACb,UAAU,CAACC,OAAO,EAAEJ,IAAI,EAAEK,cAAc,CAAC;EAChD;AACF,CAAC;AAEDf,oBAAoB,CAACK,SAAS,CAACsB,IAAI,GAAG,YAAY;EAChD,IAAI,CAACvB,UAAU,GAAG,IAAI;AACxB,CAAC;AACD,eAAeJ,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}