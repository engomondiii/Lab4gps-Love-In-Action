{"ast":null,"code":"import BoundingRectangle from \"../Core/BoundingRectangle.js\";\nimport Check from \"../Core/Check.js\";\nimport Color from \"../Core/Color.js\";\nimport defined from \"../Core/defined.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport DeveloperError from \"../Core/DeveloperError.js\";\nimport PrimitiveType from \"../Core/PrimitiveType.js\";\nimport ViewportQuadVS from \"../Shaders/ViewportQuadVS.js\";\nimport ClearCommand from \"./ClearCommand.js\";\nimport DrawCommand from \"./DrawCommand.js\";\nimport Framebuffer from \"./Framebuffer.js\";\nimport RenderState from \"./RenderState.js\";\nimport ShaderProgram from \"./ShaderProgram.js\";\n\n/**\n * @private\n */\nfunction ComputeEngine(context) {\n  this._context = context;\n}\nlet renderStateScratch;\nconst drawCommandScratch = new DrawCommand({\n  primitiveType: PrimitiveType.TRIANGLES\n});\nconst clearCommandScratch = new ClearCommand({\n  color: new Color(0.0, 0.0, 0.0, 0.0)\n});\nfunction createFramebuffer(context, outputTexture) {\n  return new Framebuffer({\n    context: context,\n    colorTextures: [outputTexture],\n    destroyAttachments: false\n  });\n}\nfunction createViewportQuadShader(context, fragmentShaderSource) {\n  return ShaderProgram.fromCache({\n    context: context,\n    vertexShaderSource: ViewportQuadVS,\n    fragmentShaderSource: fragmentShaderSource,\n    attributeLocations: {\n      position: 0,\n      textureCoordinates: 1\n    }\n  });\n}\nfunction createRenderState(width, height) {\n  if (!defined(renderStateScratch) || renderStateScratch.viewport.width !== width || renderStateScratch.viewport.height !== height) {\n    renderStateScratch = RenderState.fromCache({\n      viewport: new BoundingRectangle(0, 0, width, height)\n    });\n  }\n  return renderStateScratch;\n}\nComputeEngine.prototype.execute = function (computeCommand) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"computeCommand\", computeCommand);\n  //>>includeEnd('debug');\n\n  // This may modify the command's resources, so do error checking afterwards\n  if (defined(computeCommand.preExecute)) {\n    computeCommand.preExecute(computeCommand);\n  }\n\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(computeCommand.fragmentShaderSource) && !defined(computeCommand.shaderProgram)) {\n    throw new DeveloperError(\"computeCommand.fragmentShaderSource or computeCommand.shaderProgram is required.\");\n  }\n  Check.defined(\"computeCommand.outputTexture\", computeCommand.outputTexture);\n  //>>includeEnd('debug');\n\n  const outputTexture = computeCommand.outputTexture;\n  const width = outputTexture.width;\n  const height = outputTexture.height;\n  const context = this._context;\n  const vertexArray = defined(computeCommand.vertexArray) ? computeCommand.vertexArray : context.getViewportQuadVertexArray();\n  const shaderProgram = defined(computeCommand.shaderProgram) ? computeCommand.shaderProgram : createViewportQuadShader(context, computeCommand.fragmentShaderSource);\n  const framebuffer = createFramebuffer(context, outputTexture);\n  const renderState = createRenderState(width, height);\n  const uniformMap = computeCommand.uniformMap;\n  const clearCommand = clearCommandScratch;\n  clearCommand.framebuffer = framebuffer;\n  clearCommand.renderState = renderState;\n  clearCommand.execute(context);\n  const drawCommand = drawCommandScratch;\n  drawCommand.vertexArray = vertexArray;\n  drawCommand.renderState = renderState;\n  drawCommand.shaderProgram = shaderProgram;\n  drawCommand.uniformMap = uniformMap;\n  drawCommand.framebuffer = framebuffer;\n  drawCommand.execute(context);\n  framebuffer.destroy();\n  if (!computeCommand.persists) {\n    shaderProgram.destroy();\n    if (defined(computeCommand.vertexArray)) {\n      vertexArray.destroy();\n    }\n  }\n  if (defined(computeCommand.postExecute)) {\n    computeCommand.postExecute(outputTexture);\n  }\n};\nComputeEngine.prototype.isDestroyed = function () {\n  return false;\n};\nComputeEngine.prototype.destroy = function () {\n  return destroyObject(this);\n};\nexport default ComputeEngine;","map":{"version":3,"names":["BoundingRectangle","Check","Color","defined","destroyObject","DeveloperError","PrimitiveType","ViewportQuadVS","ClearCommand","DrawCommand","Framebuffer","RenderState","ShaderProgram","ComputeEngine","context","_context","renderStateScratch","drawCommandScratch","primitiveType","TRIANGLES","clearCommandScratch","color","createFramebuffer","outputTexture","colorTextures","destroyAttachments","createViewportQuadShader","fragmentShaderSource","fromCache","vertexShaderSource","attributeLocations","position","textureCoordinates","createRenderState","width","height","viewport","prototype","execute","computeCommand","preExecute","shaderProgram","vertexArray","getViewportQuadVertexArray","framebuffer","renderState","uniformMap","clearCommand","drawCommand","destroy","persists","postExecute","isDestroyed"],"sources":["/Users/mac/Desktop/IWL_Fresh_Start/Lab4gps-Love-In-Action/node_modules/@cesium/engine/Source/Renderer/ComputeEngine.js"],"sourcesContent":["import BoundingRectangle from \"../Core/BoundingRectangle.js\";\nimport Check from \"../Core/Check.js\";\nimport Color from \"../Core/Color.js\";\nimport defined from \"../Core/defined.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport DeveloperError from \"../Core/DeveloperError.js\";\nimport PrimitiveType from \"../Core/PrimitiveType.js\";\nimport ViewportQuadVS from \"../Shaders/ViewportQuadVS.js\";\nimport ClearCommand from \"./ClearCommand.js\";\nimport DrawCommand from \"./DrawCommand.js\";\nimport Framebuffer from \"./Framebuffer.js\";\nimport RenderState from \"./RenderState.js\";\nimport ShaderProgram from \"./ShaderProgram.js\";\n\n/**\n * @private\n */\nfunction ComputeEngine(context) {\n  this._context = context;\n}\n\nlet renderStateScratch;\nconst drawCommandScratch = new DrawCommand({\n  primitiveType: PrimitiveType.TRIANGLES,\n});\nconst clearCommandScratch = new ClearCommand({\n  color: new Color(0.0, 0.0, 0.0, 0.0),\n});\n\nfunction createFramebuffer(context, outputTexture) {\n  return new Framebuffer({\n    context: context,\n    colorTextures: [outputTexture],\n    destroyAttachments: false,\n  });\n}\n\nfunction createViewportQuadShader(context, fragmentShaderSource) {\n  return ShaderProgram.fromCache({\n    context: context,\n    vertexShaderSource: ViewportQuadVS,\n    fragmentShaderSource: fragmentShaderSource,\n    attributeLocations: {\n      position: 0,\n      textureCoordinates: 1,\n    },\n  });\n}\n\nfunction createRenderState(width, height) {\n  if (\n    !defined(renderStateScratch) ||\n    renderStateScratch.viewport.width !== width ||\n    renderStateScratch.viewport.height !== height\n  ) {\n    renderStateScratch = RenderState.fromCache({\n      viewport: new BoundingRectangle(0, 0, width, height),\n    });\n  }\n  return renderStateScratch;\n}\n\nComputeEngine.prototype.execute = function (computeCommand) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"computeCommand\", computeCommand);\n  //>>includeEnd('debug');\n\n  // This may modify the command's resources, so do error checking afterwards\n  if (defined(computeCommand.preExecute)) {\n    computeCommand.preExecute(computeCommand);\n  }\n\n  //>>includeStart('debug', pragmas.debug);\n  if (\n    !defined(computeCommand.fragmentShaderSource) &&\n    !defined(computeCommand.shaderProgram)\n  ) {\n    throw new DeveloperError(\n      \"computeCommand.fragmentShaderSource or computeCommand.shaderProgram is required.\",\n    );\n  }\n\n  Check.defined(\"computeCommand.outputTexture\", computeCommand.outputTexture);\n  //>>includeEnd('debug');\n\n  const outputTexture = computeCommand.outputTexture;\n  const width = outputTexture.width;\n  const height = outputTexture.height;\n\n  const context = this._context;\n  const vertexArray = defined(computeCommand.vertexArray)\n    ? computeCommand.vertexArray\n    : context.getViewportQuadVertexArray();\n  const shaderProgram = defined(computeCommand.shaderProgram)\n    ? computeCommand.shaderProgram\n    : createViewportQuadShader(context, computeCommand.fragmentShaderSource);\n  const framebuffer = createFramebuffer(context, outputTexture);\n  const renderState = createRenderState(width, height);\n  const uniformMap = computeCommand.uniformMap;\n\n  const clearCommand = clearCommandScratch;\n  clearCommand.framebuffer = framebuffer;\n  clearCommand.renderState = renderState;\n  clearCommand.execute(context);\n\n  const drawCommand = drawCommandScratch;\n  drawCommand.vertexArray = vertexArray;\n  drawCommand.renderState = renderState;\n  drawCommand.shaderProgram = shaderProgram;\n  drawCommand.uniformMap = uniformMap;\n  drawCommand.framebuffer = framebuffer;\n  drawCommand.execute(context);\n\n  framebuffer.destroy();\n\n  if (!computeCommand.persists) {\n    shaderProgram.destroy();\n    if (defined(computeCommand.vertexArray)) {\n      vertexArray.destroy();\n    }\n  }\n\n  if (defined(computeCommand.postExecute)) {\n    computeCommand.postExecute(outputTexture);\n  }\n};\n\nComputeEngine.prototype.isDestroyed = function () {\n  return false;\n};\n\nComputeEngine.prototype.destroy = function () {\n  return destroyObject(this);\n};\nexport default ComputeEngine;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}