{"ast":null,"code":"import AttributeType from \"../AttributeType.js\";\nimport ShaderDestination from \"../../Renderer/ShaderDestination.js\";\nimport PrimitiveOutlineGenerator from \"./PrimitiveOutlineGenerator.js\";\nimport PrimitiveOutlineStageVS from \"../../Shaders/Model/PrimitiveOutlineStageVS.js\";\nimport PrimitiveOutlineStageFS from \"../../Shaders/Model/PrimitiveOutlineStageFS.js\";\n\n/**\n * The primitive outline pipeline stage configures the shader to render outlines\n * from the CESIUM_primitive_outline extension.\n *\n * @namespace PrimitiveOutlinePipelineStage\n *\n * @private\n */\nconst PrimitiveOutlinePipelineStage = {\n  name: \"PrimitiveOutlinePipelineStage\" // Helps with debugging\n};\n\n/**\n * Process a primitive. This modifies the following parts of the render\n * resources:\n * <ul>\n *  <li>Declares a new attribute for the outline (texture) coordinates</li>\n *  <li>Adds shader code to overlay outlines on the primitive after lighting computations</li>\n *  <li>Add uniforms for showing the outline and changing its color</li>\n * </ul>\n * @param {PrimitiveRenderResources} renderResources The render resources for the primitive\n * @param {ModelComponents.Primitive} primitive The primitive to be rendered\n * @param {FrameState} frameState The frame state\n * @private\n */\nPrimitiveOutlinePipelineStage.process = function (renderResources, primitive, frameState) {\n  const shaderBuilder = renderResources.shaderBuilder;\n  const uniformMap = renderResources.uniformMap;\n  shaderBuilder.addDefine(\"HAS_PRIMITIVE_OUTLINE\", undefined, ShaderDestination.BOTH);\n  shaderBuilder.addAttribute(\"vec3\", \"a_outlineCoordinates\");\n  shaderBuilder.addVarying(\"vec3\", \"v_outlineCoordinates\");\n  const outlineCoordinates = primitive.outlineCoordinates;\n  const vertexAttribute = {\n    index: renderResources.attributeIndex++,\n    vertexBuffer: outlineCoordinates.buffer,\n    componentsPerAttribute: AttributeType.getNumberOfComponents(outlineCoordinates.type),\n    componentDatatype: outlineCoordinates.componentDatatype,\n    offsetInBytes: outlineCoordinates.byteOffset,\n    strideInBytes: outlineCoordinates.byteStride,\n    normalize: outlineCoordinates.normalized\n  };\n  renderResources.attributes.push(vertexAttribute);\n  shaderBuilder.addUniform(\"sampler2D\", \"model_outlineTexture\", ShaderDestination.FRAGMENT);\n\n  // This automatically handles caching the texture on the context\n  const outlineTexture = PrimitiveOutlineGenerator.createTexture(frameState.context);\n  uniformMap.model_outlineTexture = function () {\n    return outlineTexture;\n  };\n  const model = renderResources.model;\n  shaderBuilder.addUniform(\"vec4\", \"model_outlineColor\", ShaderDestination.FRAGMENT);\n  uniformMap.model_outlineColor = function () {\n    return model.outlineColor;\n  };\n  shaderBuilder.addUniform(\"bool\", \"model_showOutline\", ShaderDestination.FRAGMENT);\n  uniformMap.model_showOutline = function () {\n    return model.showOutline;\n  };\n  shaderBuilder.addVertexLines(PrimitiveOutlineStageVS);\n  shaderBuilder.addFragmentLines(PrimitiveOutlineStageFS);\n};\nexport default PrimitiveOutlinePipelineStage;","map":{"version":3,"names":["AttributeType","ShaderDestination","PrimitiveOutlineGenerator","PrimitiveOutlineStageVS","PrimitiveOutlineStageFS","PrimitiveOutlinePipelineStage","name","process","renderResources","primitive","frameState","shaderBuilder","uniformMap","addDefine","undefined","BOTH","addAttribute","addVarying","outlineCoordinates","vertexAttribute","index","attributeIndex","vertexBuffer","buffer","componentsPerAttribute","getNumberOfComponents","type","componentDatatype","offsetInBytes","byteOffset","strideInBytes","byteStride","normalize","normalized","attributes","push","addUniform","FRAGMENT","outlineTexture","createTexture","context","model_outlineTexture","model","model_outlineColor","outlineColor","model_showOutline","showOutline","addVertexLines","addFragmentLines"],"sources":["/Users/mac/Desktop/IWL_Fresh_Start/Lab4gps-Love-In-Action/node_modules/@cesium/engine/Source/Scene/Model/PrimitiveOutlinePipelineStage.js"],"sourcesContent":["import AttributeType from \"../AttributeType.js\";\nimport ShaderDestination from \"../../Renderer/ShaderDestination.js\";\nimport PrimitiveOutlineGenerator from \"./PrimitiveOutlineGenerator.js\";\nimport PrimitiveOutlineStageVS from \"../../Shaders/Model/PrimitiveOutlineStageVS.js\";\nimport PrimitiveOutlineStageFS from \"../../Shaders/Model/PrimitiveOutlineStageFS.js\";\n\n/**\n * The primitive outline pipeline stage configures the shader to render outlines\n * from the CESIUM_primitive_outline extension.\n *\n * @namespace PrimitiveOutlinePipelineStage\n *\n * @private\n */\nconst PrimitiveOutlinePipelineStage = {\n  name: \"PrimitiveOutlinePipelineStage\", // Helps with debugging\n};\n\n/**\n * Process a primitive. This modifies the following parts of the render\n * resources:\n * <ul>\n *  <li>Declares a new attribute for the outline (texture) coordinates</li>\n *  <li>Adds shader code to overlay outlines on the primitive after lighting computations</li>\n *  <li>Add uniforms for showing the outline and changing its color</li>\n * </ul>\n * @param {PrimitiveRenderResources} renderResources The render resources for the primitive\n * @param {ModelComponents.Primitive} primitive The primitive to be rendered\n * @param {FrameState} frameState The frame state\n * @private\n */\nPrimitiveOutlinePipelineStage.process = function (\n  renderResources,\n  primitive,\n  frameState,\n) {\n  const shaderBuilder = renderResources.shaderBuilder;\n  const uniformMap = renderResources.uniformMap;\n\n  shaderBuilder.addDefine(\n    \"HAS_PRIMITIVE_OUTLINE\",\n    undefined,\n    ShaderDestination.BOTH,\n  );\n\n  shaderBuilder.addAttribute(\"vec3\", \"a_outlineCoordinates\");\n  shaderBuilder.addVarying(\"vec3\", \"v_outlineCoordinates\");\n\n  const outlineCoordinates = primitive.outlineCoordinates;\n  const vertexAttribute = {\n    index: renderResources.attributeIndex++,\n    vertexBuffer: outlineCoordinates.buffer,\n    componentsPerAttribute: AttributeType.getNumberOfComponents(\n      outlineCoordinates.type,\n    ),\n    componentDatatype: outlineCoordinates.componentDatatype,\n    offsetInBytes: outlineCoordinates.byteOffset,\n    strideInBytes: outlineCoordinates.byteStride,\n    normalize: outlineCoordinates.normalized,\n  };\n  renderResources.attributes.push(vertexAttribute);\n\n  shaderBuilder.addUniform(\n    \"sampler2D\",\n    \"model_outlineTexture\",\n    ShaderDestination.FRAGMENT,\n  );\n\n  // This automatically handles caching the texture on the context\n  const outlineTexture = PrimitiveOutlineGenerator.createTexture(\n    frameState.context,\n  );\n  uniformMap.model_outlineTexture = function () {\n    return outlineTexture;\n  };\n\n  const model = renderResources.model;\n  shaderBuilder.addUniform(\n    \"vec4\",\n    \"model_outlineColor\",\n    ShaderDestination.FRAGMENT,\n  );\n  uniformMap.model_outlineColor = function () {\n    return model.outlineColor;\n  };\n  shaderBuilder.addUniform(\n    \"bool\",\n    \"model_showOutline\",\n    ShaderDestination.FRAGMENT,\n  );\n  uniformMap.model_showOutline = function () {\n    return model.showOutline;\n  };\n\n  shaderBuilder.addVertexLines(PrimitiveOutlineStageVS);\n  shaderBuilder.addFragmentLines(PrimitiveOutlineStageFS);\n};\n\nexport default PrimitiveOutlinePipelineStage;\n"],"mappings":"AAAA,OAAOA,aAAa,MAAM,qBAAqB;AAC/C,OAAOC,iBAAiB,MAAM,qCAAqC;AACnE,OAAOC,yBAAyB,MAAM,gCAAgC;AACtE,OAAOC,uBAAuB,MAAM,gDAAgD;AACpF,OAAOC,uBAAuB,MAAM,gDAAgD;;AAEpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,6BAA6B,GAAG;EACpCC,IAAI,EAAE,+BAA+B,CAAE;AACzC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAD,6BAA6B,CAACE,OAAO,GAAG,UACtCC,eAAe,EACfC,SAAS,EACTC,UAAU,EACV;EACA,MAAMC,aAAa,GAAGH,eAAe,CAACG,aAAa;EACnD,MAAMC,UAAU,GAAGJ,eAAe,CAACI,UAAU;EAE7CD,aAAa,CAACE,SAAS,CACrB,uBAAuB,EACvBC,SAAS,EACTb,iBAAiB,CAACc,IACpB,CAAC;EAEDJ,aAAa,CAACK,YAAY,CAAC,MAAM,EAAE,sBAAsB,CAAC;EAC1DL,aAAa,CAACM,UAAU,CAAC,MAAM,EAAE,sBAAsB,CAAC;EAExD,MAAMC,kBAAkB,GAAGT,SAAS,CAACS,kBAAkB;EACvD,MAAMC,eAAe,GAAG;IACtBC,KAAK,EAAEZ,eAAe,CAACa,cAAc,EAAE;IACvCC,YAAY,EAAEJ,kBAAkB,CAACK,MAAM;IACvCC,sBAAsB,EAAExB,aAAa,CAACyB,qBAAqB,CACzDP,kBAAkB,CAACQ,IACrB,CAAC;IACDC,iBAAiB,EAAET,kBAAkB,CAACS,iBAAiB;IACvDC,aAAa,EAAEV,kBAAkB,CAACW,UAAU;IAC5CC,aAAa,EAAEZ,kBAAkB,CAACa,UAAU;IAC5CC,SAAS,EAAEd,kBAAkB,CAACe;EAChC,CAAC;EACDzB,eAAe,CAAC0B,UAAU,CAACC,IAAI,CAAChB,eAAe,CAAC;EAEhDR,aAAa,CAACyB,UAAU,CACtB,WAAW,EACX,sBAAsB,EACtBnC,iBAAiB,CAACoC,QACpB,CAAC;;EAED;EACA,MAAMC,cAAc,GAAGpC,yBAAyB,CAACqC,aAAa,CAC5D7B,UAAU,CAAC8B,OACb,CAAC;EACD5B,UAAU,CAAC6B,oBAAoB,GAAG,YAAY;IAC5C,OAAOH,cAAc;EACvB,CAAC;EAED,MAAMI,KAAK,GAAGlC,eAAe,CAACkC,KAAK;EACnC/B,aAAa,CAACyB,UAAU,CACtB,MAAM,EACN,oBAAoB,EACpBnC,iBAAiB,CAACoC,QACpB,CAAC;EACDzB,UAAU,CAAC+B,kBAAkB,GAAG,YAAY;IAC1C,OAAOD,KAAK,CAACE,YAAY;EAC3B,CAAC;EACDjC,aAAa,CAACyB,UAAU,CACtB,MAAM,EACN,mBAAmB,EACnBnC,iBAAiB,CAACoC,QACpB,CAAC;EACDzB,UAAU,CAACiC,iBAAiB,GAAG,YAAY;IACzC,OAAOH,KAAK,CAACI,WAAW;EAC1B,CAAC;EAEDnC,aAAa,CAACoC,cAAc,CAAC5C,uBAAuB,CAAC;EACrDQ,aAAa,CAACqC,gBAAgB,CAAC5C,uBAAuB,CAAC;AACzD,CAAC;AAED,eAAeC,6BAA6B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}