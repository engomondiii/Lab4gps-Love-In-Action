{"ast":null,"code":"import Axis from \"../Axis.js\";\nimport B3dmParser from \"../B3dmParser.js\";\nimport Cartesian3 from \"../../Core/Cartesian3.js\";\nimport Cesium3DTileFeatureTable from \"../Cesium3DTileFeatureTable.js\";\nimport Check from \"../../Core/Check.js\";\nimport ComponentDatatype from \"../../Core/ComponentDatatype.js\";\nimport defaultValue from \"../../Core/defaultValue.js\";\nimport defined from \"../../Core/defined.js\";\nimport StructuralMetadata from \"../StructuralMetadata.js\";\nimport GltfLoader from \"../GltfLoader.js\";\nimport Matrix4 from \"../../Core/Matrix4.js\";\nimport MetadataClass from \"../MetadataClass.js\";\nimport ModelComponents from \"../ModelComponents.js\";\nimport ModelUtility from \"./ModelUtility.js\";\nimport parseBatchTable from \"../parseBatchTable.js\";\nimport PropertyTable from \"../PropertyTable.js\";\nimport ResourceLoader from \"../ResourceLoader.js\";\nimport VertexAttributeSemantic from \"../VertexAttributeSemantic.js\";\nconst B3dmLoaderState = {\n  UNLOADED: 0,\n  LOADING: 1,\n  PROCESSING: 2,\n  READY: 3,\n  FAILED: 4\n};\nconst FeatureIdAttribute = ModelComponents.FeatureIdAttribute;\n\n/**\n * Loads a Batched 3D Model.\n * <p>\n * Implements the {@link ResourceLoader} interface.\n * </p>\n *\n * @alias B3dmLoader\n * @constructor\n * @augments ResourceLoader\n * @private\n *\n * @param {object} options Object with the following properties:\n * @param {Resource} options.b3dmResource The {@link Resource} containing the b3dm.\n * @param {ArrayBuffer} options.arrayBuffer The array buffer of the b3dm contents.\n * @param {number} [options.byteOffset] The byte offset to the beginning of the b3dm contents in the array buffer.\n * @param {Resource} [options.baseResource] The {@link Resource} that paths in the glTF JSON are relative to.\n * @param {boolean} [options.releaseGltfJson=false] When true, the glTF JSON is released once the glTF is loaded. This is especially useful for cases like 3D Tiles, where each .gltf model is unique and caching the glTF JSON is not effective.\n * @param {boolean} [options.asynchronous=true] Determines if WebGL resource creation will be spread out over several frames or block until all WebGL resources are created.\n * @param {boolean} [options.incrementallyLoadTextures=true] Determine if textures may continue to stream in after the glTF is loaded.\n * @param {Axis} [options.upAxis=Axis.Y] The up-axis of the glTF model.\n * @param {Axis} [options.forwardAxis=Axis.X] The forward-axis of the glTF model.\n * @param {boolean} [options.loadAttributesAsTypedArray=false] If <code>true</code>, load all attributes as typed arrays instead of GPU buffers. If the attributes are interleaved in the glTF they will be de-interleaved in the typed array.\n * @param {boolean} [options.loadAttributesFor2D=false] If <code>true</code>, load the positions buffer and any instanced attribute buffers as typed arrays for accurately projecting models to 2D.\n * @param {boolean} [options.enablePick=false]  If <code>true</code>, load the positions buffer, any instanced attribute buffers, and index buffer as typed arrays for CPU-enabled picking in WebGL1.\n * @param {boolean} [options.loadIndicesForWireframe=false] If <code>true</code>, load the index buffer as a typed array. This is useful for creating wireframe indices in WebGL1.\n * @param {boolean} [options.loadPrimitiveOutline=true] If <code>true</code>, load outlines from the {@link https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/CESIUM_primitive_outline|CESIUM_primitive_outline} extension. This can be set false to avoid post-processing geometry at load time.\n * @param {boolean} [options.loadForClassification=false] If <code>true</code> and if the model has feature IDs, load the feature IDs and indices as typed arrays. This is useful for batching features for classification.\n * */\nfunction B3dmLoader(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n  const b3dmResource = options.b3dmResource;\n  let baseResource = options.baseResource;\n  const arrayBuffer = options.arrayBuffer;\n  const byteOffset = defaultValue(options.byteOffset, 0);\n  const releaseGltfJson = defaultValue(options.releaseGltfJson, false);\n  const asynchronous = defaultValue(options.asynchronous, true);\n  const incrementallyLoadTextures = defaultValue(options.incrementallyLoadTextures, true);\n  const upAxis = defaultValue(options.upAxis, Axis.Y);\n  const forwardAxis = defaultValue(options.forwardAxis, Axis.X);\n  const loadAttributesAsTypedArray = defaultValue(options.loadAttributesAsTypedArray, false);\n  const loadAttributesFor2D = defaultValue(options.loadAttributesFor2D, false);\n  const enablePick = defaultValue(options.enablePick, false);\n  const loadIndicesForWireframe = defaultValue(options.loadIndicesForWireframe, false);\n  const loadPrimitiveOutline = defaultValue(options.loadPrimitiveOutline, true);\n  const loadForClassification = defaultValue(options.loadForClassification, false);\n\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"options.b3dmResource\", b3dmResource);\n  Check.typeOf.object(\"options.arrayBuffer\", arrayBuffer);\n  //>>includeEnd('debug');\n\n  baseResource = defined(baseResource) ? baseResource : b3dmResource.clone();\n  this._b3dmResource = b3dmResource;\n  this._baseResource = baseResource;\n  this._arrayBuffer = arrayBuffer;\n  this._byteOffset = byteOffset;\n  this._releaseGltfJson = releaseGltfJson;\n  this._asynchronous = asynchronous;\n  this._incrementallyLoadTextures = incrementallyLoadTextures;\n  this._upAxis = upAxis;\n  this._forwardAxis = forwardAxis;\n  this._loadAttributesAsTypedArray = loadAttributesAsTypedArray;\n  this._loadAttributesFor2D = loadAttributesFor2D;\n  this._enablePick = enablePick;\n  this._loadIndicesForWireframe = loadIndicesForWireframe;\n  this._loadPrimitiveOutline = loadPrimitiveOutline;\n  this._loadForClassification = loadForClassification;\n  this._state = B3dmLoaderState.UNLOADED;\n  this._promise = undefined;\n  this._gltfLoader = undefined;\n\n  // Loaded results.\n  this._batchLength = 0;\n  this._propertyTable = undefined;\n\n  // The batch table object contains a json and a binary component access using keys of the same name.\n  this._batchTable = undefined;\n  this._components = undefined;\n  this._transform = Matrix4.IDENTITY;\n}\nif (defined(Object.create)) {\n  B3dmLoader.prototype = Object.create(ResourceLoader.prototype);\n  B3dmLoader.prototype.constructor = B3dmLoader;\n}\nObject.defineProperties(B3dmLoader.prototype, {\n  /**\n   * true if textures are loaded, useful when incrementallyLoadTextures is true\n   *\n   * @memberof B3dmLoader.prototype\n   *\n   * @type {boolean}\n   * @readonly\n   * @private\n   */\n  texturesLoaded: {\n    get: function () {\n      return this._gltfLoader?.texturesLoaded;\n    }\n  },\n  /**\n   * The cache key of the resource\n   *\n   * @memberof B3dmLoader.prototype\n   *\n   * @type {string}\n   * @readonly\n   * @private\n   */\n  cacheKey: {\n    get: function () {\n      return undefined;\n    }\n  },\n  /**\n   * The loaded components.\n   *\n   * @memberof B3dmLoader.prototype\n   *\n   * @type {ModelComponents.Components}\n   * @readonly\n   * @private\n   */\n  components: {\n    get: function () {\n      return this._components;\n    }\n  }\n});\n\n/**\n * Loads the resource.\n * @returns {Promise<B3dmLoader>} A promise which resolves to the loader when the resource loading is completed.\n * @private\n */\nB3dmLoader.prototype.load = function () {\n  if (defined(this._promise)) {\n    return this._promise;\n  }\n  const b3dm = B3dmParser.parse(this._arrayBuffer, this._byteOffset);\n  let batchLength = b3dm.batchLength;\n  const featureTableJson = b3dm.featureTableJson;\n  const featureTableBinary = b3dm.featureTableBinary;\n  const batchTableJson = b3dm.batchTableJson;\n  const batchTableBinary = b3dm.batchTableBinary;\n  const featureTable = new Cesium3DTileFeatureTable(featureTableJson, featureTableBinary);\n  batchLength = featureTable.getGlobalProperty(\"BATCH_LENGTH\");\n  // Set batch length.\n  this._batchLength = batchLength;\n  // Set the RTC Center transform, if present.\n  const rtcCenter = featureTable.getGlobalProperty(\"RTC_CENTER\", ComponentDatatype.FLOAT, 3);\n  if (defined(rtcCenter)) {\n    this._transform = Matrix4.fromTranslation(Cartesian3.fromArray(rtcCenter));\n  }\n  this._batchTable = {\n    json: batchTableJson,\n    binary: batchTableBinary\n  };\n  const gltfLoader = new GltfLoader({\n    typedArray: b3dm.gltf,\n    upAxis: this._upAxis,\n    forwardAxis: this._forwardAxis,\n    gltfResource: this._b3dmResource,\n    baseResource: this._baseResource,\n    releaseGltfJson: this._releaseGltfJson,\n    incrementallyLoadTextures: this._incrementallyLoadTextures,\n    loadAttributesAsTypedArray: this._loadAttributesAsTypedArray,\n    loadAttributesFor2D: this._loadAttributesFor2D,\n    enablePick: this._enablePick,\n    loadIndicesForWireframe: this._loadIndicesForWireframe,\n    loadPrimitiveOutline: this._loadPrimitiveOutline,\n    loadForClassification: this._loadForClassification,\n    renameBatchIdSemantic: true\n  });\n  this._gltfLoader = gltfLoader;\n  this._state = B3dmLoaderState.LOADING;\n  const that = this;\n  this._promise = gltfLoader.load().then(function () {\n    if (that.isDestroyed()) {\n      return;\n    }\n    that._state = B3dmLoaderState.PROCESSING;\n    return that;\n  }).catch(function (error) {\n    if (that.isDestroyed()) {\n      return;\n    }\n    return handleError(that, error);\n  });\n  return this._promise;\n};\nfunction handleError(b3dmLoader, error) {\n  b3dmLoader.unload();\n  b3dmLoader._state = B3dmLoaderState.FAILED;\n  const errorMessage = \"Failed to load b3dm\";\n  error = b3dmLoader.getError(errorMessage, error);\n  return Promise.reject(error);\n}\nB3dmLoader.prototype.process = function (frameState) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"frameState\", frameState);\n  //>>includeEnd('debug');\n\n  if (this._state === B3dmLoaderState.READY) {\n    return true;\n  }\n  if (this._state !== B3dmLoaderState.PROCESSING) {\n    return false;\n  }\n  const ready = this._gltfLoader.process(frameState);\n  if (!ready) {\n    return false;\n  }\n  const components = this._gltfLoader.components;\n\n  // Combine the RTC_CENTER transform from the b3dm and the CESIUM_RTC\n  // transform from the glTF. In practice usually only one or the\n  // other is supplied. If they don't exist the transforms will\n  // be identity matrices.\n  components.transform = Matrix4.multiplyTransformation(this._transform, components.transform, components.transform);\n  createStructuralMetadata(this, components);\n  this._components = components;\n\n  // Now that we have the parsed components, we can release the array buffer\n  this._arrayBuffer = undefined;\n  this._state = B3dmLoaderState.READY;\n  return true;\n};\nfunction createStructuralMetadata(loader, components) {\n  const batchTable = loader._batchTable;\n  const batchLength = loader._batchLength;\n  if (batchLength === 0) {\n    return;\n  }\n  let structuralMetadata;\n  if (defined(batchTable.json)) {\n    // Add the structural metadata from the batch table to the model components.\n    structuralMetadata = parseBatchTable({\n      count: batchLength,\n      batchTable: batchTable.json,\n      binaryBody: batchTable.binary\n    });\n  } else {\n    // If batch table is not defined, create a property table without any properties.\n    const emptyPropertyTable = new PropertyTable({\n      name: MetadataClass.BATCH_TABLE_CLASS_NAME,\n      count: batchLength\n    });\n    structuralMetadata = new StructuralMetadata({\n      schema: {},\n      propertyTables: [emptyPropertyTable]\n    });\n  }\n\n  // Add the feature ID attribute to the primitives.\n  const nodes = components.scene.nodes;\n  const length = nodes.length;\n  for (let i = 0; i < length; i++) {\n    processNode(nodes[i]);\n  }\n  components.structuralMetadata = structuralMetadata;\n}\n\n// Recursive function to add the feature ID attribute to all primitives that have a feature ID vertex attribute.\nfunction processNode(node) {\n  const childrenLength = node.children.length;\n  for (let i = 0; i < childrenLength; i++) {\n    processNode(node.children[i]);\n  }\n  const primitivesLength = node.primitives.length;\n  for (let i = 0; i < primitivesLength; i++) {\n    const primitive = node.primitives[i];\n    const featureIdVertexAttribute = ModelUtility.getAttributeBySemantic(primitive, VertexAttributeSemantic.FEATURE_ID);\n    if (defined(featureIdVertexAttribute)) {\n      featureIdVertexAttribute.setIndex = 0;\n      const featureIdAttribute = new FeatureIdAttribute();\n      featureIdAttribute.propertyTableId = 0;\n      featureIdAttribute.setIndex = 0;\n      featureIdAttribute.positionalLabel = \"featureId_0\";\n      primitive.featureIds.push(featureIdAttribute);\n    }\n  }\n}\nB3dmLoader.prototype.unload = function () {\n  if (defined(this._gltfLoader) && !this._gltfLoader.isDestroyed()) {\n    this._gltfLoader.unload();\n  }\n  this._components = undefined;\n  this._arrayBuffer = undefined;\n};\nexport default B3dmLoader;","map":{"version":3,"names":["Axis","B3dmParser","Cartesian3","Cesium3DTileFeatureTable","Check","ComponentDatatype","defaultValue","defined","StructuralMetadata","GltfLoader","Matrix4","MetadataClass","ModelComponents","ModelUtility","parseBatchTable","PropertyTable","ResourceLoader","VertexAttributeSemantic","B3dmLoaderState","UNLOADED","LOADING","PROCESSING","READY","FAILED","FeatureIdAttribute","B3dmLoader","options","EMPTY_OBJECT","b3dmResource","baseResource","arrayBuffer","byteOffset","releaseGltfJson","asynchronous","incrementallyLoadTextures","upAxis","Y","forwardAxis","X","loadAttributesAsTypedArray","loadAttributesFor2D","enablePick","loadIndicesForWireframe","loadPrimitiveOutline","loadForClassification","typeOf","object","clone","_b3dmResource","_baseResource","_arrayBuffer","_byteOffset","_releaseGltfJson","_asynchronous","_incrementallyLoadTextures","_upAxis","_forwardAxis","_loadAttributesAsTypedArray","_loadAttributesFor2D","_enablePick","_loadIndicesForWireframe","_loadPrimitiveOutline","_loadForClassification","_state","_promise","undefined","_gltfLoader","_batchLength","_propertyTable","_batchTable","_components","_transform","IDENTITY","Object","create","prototype","constructor","defineProperties","texturesLoaded","get","cacheKey","components","load","b3dm","parse","batchLength","featureTableJson","featureTableBinary","batchTableJson","batchTableBinary","featureTable","getGlobalProperty","rtcCenter","FLOAT","fromTranslation","fromArray","json","binary","gltfLoader","typedArray","gltf","gltfResource","renameBatchIdSemantic","that","then","isDestroyed","catch","error","handleError","b3dmLoader","unload","errorMessage","getError","Promise","reject","process","frameState","ready","transform","multiplyTransformation","createStructuralMetadata","loader","batchTable","structuralMetadata","count","binaryBody","emptyPropertyTable","name","BATCH_TABLE_CLASS_NAME","schema","propertyTables","nodes","scene","length","i","processNode","node","childrenLength","children","primitivesLength","primitives","primitive","featureIdVertexAttribute","getAttributeBySemantic","FEATURE_ID","setIndex","featureIdAttribute","propertyTableId","positionalLabel","featureIds","push"],"sources":["/Users/mac/Desktop/IWL_Fresh_Start/Lab4gps-Love-In-Action/node_modules/@cesium/engine/Source/Scene/Model/B3dmLoader.js"],"sourcesContent":["import Axis from \"../Axis.js\";\nimport B3dmParser from \"../B3dmParser.js\";\nimport Cartesian3 from \"../../Core/Cartesian3.js\";\nimport Cesium3DTileFeatureTable from \"../Cesium3DTileFeatureTable.js\";\nimport Check from \"../../Core/Check.js\";\nimport ComponentDatatype from \"../../Core/ComponentDatatype.js\";\nimport defaultValue from \"../../Core/defaultValue.js\";\nimport defined from \"../../Core/defined.js\";\nimport StructuralMetadata from \"../StructuralMetadata.js\";\nimport GltfLoader from \"../GltfLoader.js\";\nimport Matrix4 from \"../../Core/Matrix4.js\";\nimport MetadataClass from \"../MetadataClass.js\";\nimport ModelComponents from \"../ModelComponents.js\";\nimport ModelUtility from \"./ModelUtility.js\";\nimport parseBatchTable from \"../parseBatchTable.js\";\nimport PropertyTable from \"../PropertyTable.js\";\nimport ResourceLoader from \"../ResourceLoader.js\";\nimport VertexAttributeSemantic from \"../VertexAttributeSemantic.js\";\n\nconst B3dmLoaderState = {\n  UNLOADED: 0,\n  LOADING: 1,\n  PROCESSING: 2,\n  READY: 3,\n  FAILED: 4,\n};\n\nconst FeatureIdAttribute = ModelComponents.FeatureIdAttribute;\n\n/**\n * Loads a Batched 3D Model.\n * <p>\n * Implements the {@link ResourceLoader} interface.\n * </p>\n *\n * @alias B3dmLoader\n * @constructor\n * @augments ResourceLoader\n * @private\n *\n * @param {object} options Object with the following properties:\n * @param {Resource} options.b3dmResource The {@link Resource} containing the b3dm.\n * @param {ArrayBuffer} options.arrayBuffer The array buffer of the b3dm contents.\n * @param {number} [options.byteOffset] The byte offset to the beginning of the b3dm contents in the array buffer.\n * @param {Resource} [options.baseResource] The {@link Resource} that paths in the glTF JSON are relative to.\n * @param {boolean} [options.releaseGltfJson=false] When true, the glTF JSON is released once the glTF is loaded. This is especially useful for cases like 3D Tiles, where each .gltf model is unique and caching the glTF JSON is not effective.\n * @param {boolean} [options.asynchronous=true] Determines if WebGL resource creation will be spread out over several frames or block until all WebGL resources are created.\n * @param {boolean} [options.incrementallyLoadTextures=true] Determine if textures may continue to stream in after the glTF is loaded.\n * @param {Axis} [options.upAxis=Axis.Y] The up-axis of the glTF model.\n * @param {Axis} [options.forwardAxis=Axis.X] The forward-axis of the glTF model.\n * @param {boolean} [options.loadAttributesAsTypedArray=false] If <code>true</code>, load all attributes as typed arrays instead of GPU buffers. If the attributes are interleaved in the glTF they will be de-interleaved in the typed array.\n * @param {boolean} [options.loadAttributesFor2D=false] If <code>true</code>, load the positions buffer and any instanced attribute buffers as typed arrays for accurately projecting models to 2D.\n * @param {boolean} [options.enablePick=false]  If <code>true</code>, load the positions buffer, any instanced attribute buffers, and index buffer as typed arrays for CPU-enabled picking in WebGL1.\n * @param {boolean} [options.loadIndicesForWireframe=false] If <code>true</code>, load the index buffer as a typed array. This is useful for creating wireframe indices in WebGL1.\n * @param {boolean} [options.loadPrimitiveOutline=true] If <code>true</code>, load outlines from the {@link https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/CESIUM_primitive_outline|CESIUM_primitive_outline} extension. This can be set false to avoid post-processing geometry at load time.\n * @param {boolean} [options.loadForClassification=false] If <code>true</code> and if the model has feature IDs, load the feature IDs and indices as typed arrays. This is useful for batching features for classification.\n * */\nfunction B3dmLoader(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  const b3dmResource = options.b3dmResource;\n  let baseResource = options.baseResource;\n  const arrayBuffer = options.arrayBuffer;\n  const byteOffset = defaultValue(options.byteOffset, 0);\n  const releaseGltfJson = defaultValue(options.releaseGltfJson, false);\n  const asynchronous = defaultValue(options.asynchronous, true);\n  const incrementallyLoadTextures = defaultValue(\n    options.incrementallyLoadTextures,\n    true,\n  );\n  const upAxis = defaultValue(options.upAxis, Axis.Y);\n  const forwardAxis = defaultValue(options.forwardAxis, Axis.X);\n  const loadAttributesAsTypedArray = defaultValue(\n    options.loadAttributesAsTypedArray,\n    false,\n  );\n  const loadAttributesFor2D = defaultValue(options.loadAttributesFor2D, false);\n  const enablePick = defaultValue(options.enablePick, false);\n  const loadIndicesForWireframe = defaultValue(\n    options.loadIndicesForWireframe,\n    false,\n  );\n  const loadPrimitiveOutline = defaultValue(options.loadPrimitiveOutline, true);\n  const loadForClassification = defaultValue(\n    options.loadForClassification,\n    false,\n  );\n\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"options.b3dmResource\", b3dmResource);\n  Check.typeOf.object(\"options.arrayBuffer\", arrayBuffer);\n  //>>includeEnd('debug');\n\n  baseResource = defined(baseResource) ? baseResource : b3dmResource.clone();\n\n  this._b3dmResource = b3dmResource;\n  this._baseResource = baseResource;\n  this._arrayBuffer = arrayBuffer;\n  this._byteOffset = byteOffset;\n  this._releaseGltfJson = releaseGltfJson;\n  this._asynchronous = asynchronous;\n  this._incrementallyLoadTextures = incrementallyLoadTextures;\n  this._upAxis = upAxis;\n  this._forwardAxis = forwardAxis;\n  this._loadAttributesAsTypedArray = loadAttributesAsTypedArray;\n  this._loadAttributesFor2D = loadAttributesFor2D;\n  this._enablePick = enablePick;\n  this._loadIndicesForWireframe = loadIndicesForWireframe;\n  this._loadPrimitiveOutline = loadPrimitiveOutline;\n  this._loadForClassification = loadForClassification;\n\n  this._state = B3dmLoaderState.UNLOADED;\n\n  this._promise = undefined;\n\n  this._gltfLoader = undefined;\n\n  // Loaded results.\n  this._batchLength = 0;\n  this._propertyTable = undefined;\n\n  // The batch table object contains a json and a binary component access using keys of the same name.\n  this._batchTable = undefined;\n  this._components = undefined;\n  this._transform = Matrix4.IDENTITY;\n}\n\nif (defined(Object.create)) {\n  B3dmLoader.prototype = Object.create(ResourceLoader.prototype);\n  B3dmLoader.prototype.constructor = B3dmLoader;\n}\n\nObject.defineProperties(B3dmLoader.prototype, {\n  /**\n   * true if textures are loaded, useful when incrementallyLoadTextures is true\n   *\n   * @memberof B3dmLoader.prototype\n   *\n   * @type {boolean}\n   * @readonly\n   * @private\n   */\n  texturesLoaded: {\n    get: function () {\n      return this._gltfLoader?.texturesLoaded;\n    },\n  },\n  /**\n   * The cache key of the resource\n   *\n   * @memberof B3dmLoader.prototype\n   *\n   * @type {string}\n   * @readonly\n   * @private\n   */\n  cacheKey: {\n    get: function () {\n      return undefined;\n    },\n  },\n\n  /**\n   * The loaded components.\n   *\n   * @memberof B3dmLoader.prototype\n   *\n   * @type {ModelComponents.Components}\n   * @readonly\n   * @private\n   */\n  components: {\n    get: function () {\n      return this._components;\n    },\n  },\n});\n\n/**\n * Loads the resource.\n * @returns {Promise<B3dmLoader>} A promise which resolves to the loader when the resource loading is completed.\n * @private\n */\nB3dmLoader.prototype.load = function () {\n  if (defined(this._promise)) {\n    return this._promise;\n  }\n\n  const b3dm = B3dmParser.parse(this._arrayBuffer, this._byteOffset);\n\n  let batchLength = b3dm.batchLength;\n  const featureTableJson = b3dm.featureTableJson;\n  const featureTableBinary = b3dm.featureTableBinary;\n  const batchTableJson = b3dm.batchTableJson;\n  const batchTableBinary = b3dm.batchTableBinary;\n\n  const featureTable = new Cesium3DTileFeatureTable(\n    featureTableJson,\n    featureTableBinary,\n  );\n  batchLength = featureTable.getGlobalProperty(\"BATCH_LENGTH\");\n  // Set batch length.\n  this._batchLength = batchLength;\n  // Set the RTC Center transform, if present.\n  const rtcCenter = featureTable.getGlobalProperty(\n    \"RTC_CENTER\",\n    ComponentDatatype.FLOAT,\n    3,\n  );\n  if (defined(rtcCenter)) {\n    this._transform = Matrix4.fromTranslation(Cartesian3.fromArray(rtcCenter));\n  }\n\n  this._batchTable = {\n    json: batchTableJson,\n    binary: batchTableBinary,\n  };\n\n  const gltfLoader = new GltfLoader({\n    typedArray: b3dm.gltf,\n    upAxis: this._upAxis,\n    forwardAxis: this._forwardAxis,\n    gltfResource: this._b3dmResource,\n    baseResource: this._baseResource,\n    releaseGltfJson: this._releaseGltfJson,\n    incrementallyLoadTextures: this._incrementallyLoadTextures,\n    loadAttributesAsTypedArray: this._loadAttributesAsTypedArray,\n    loadAttributesFor2D: this._loadAttributesFor2D,\n    enablePick: this._enablePick,\n    loadIndicesForWireframe: this._loadIndicesForWireframe,\n    loadPrimitiveOutline: this._loadPrimitiveOutline,\n    loadForClassification: this._loadForClassification,\n    renameBatchIdSemantic: true,\n  });\n\n  this._gltfLoader = gltfLoader;\n  this._state = B3dmLoaderState.LOADING;\n\n  const that = this;\n  this._promise = gltfLoader\n    .load()\n    .then(function () {\n      if (that.isDestroyed()) {\n        return;\n      }\n\n      that._state = B3dmLoaderState.PROCESSING;\n      return that;\n    })\n    .catch(function (error) {\n      if (that.isDestroyed()) {\n        return;\n      }\n\n      return handleError(that, error);\n    });\n\n  return this._promise;\n};\n\nfunction handleError(b3dmLoader, error) {\n  b3dmLoader.unload();\n  b3dmLoader._state = B3dmLoaderState.FAILED;\n  const errorMessage = \"Failed to load b3dm\";\n  error = b3dmLoader.getError(errorMessage, error);\n  return Promise.reject(error);\n}\n\nB3dmLoader.prototype.process = function (frameState) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"frameState\", frameState);\n  //>>includeEnd('debug');\n\n  if (this._state === B3dmLoaderState.READY) {\n    return true;\n  }\n\n  if (this._state !== B3dmLoaderState.PROCESSING) {\n    return false;\n  }\n\n  const ready = this._gltfLoader.process(frameState);\n  if (!ready) {\n    return false;\n  }\n\n  const components = this._gltfLoader.components;\n\n  // Combine the RTC_CENTER transform from the b3dm and the CESIUM_RTC\n  // transform from the glTF. In practice usually only one or the\n  // other is supplied. If they don't exist the transforms will\n  // be identity matrices.\n  components.transform = Matrix4.multiplyTransformation(\n    this._transform,\n    components.transform,\n    components.transform,\n  );\n  createStructuralMetadata(this, components);\n  this._components = components;\n\n  // Now that we have the parsed components, we can release the array buffer\n  this._arrayBuffer = undefined;\n\n  this._state = B3dmLoaderState.READY;\n  return true;\n};\n\nfunction createStructuralMetadata(loader, components) {\n  const batchTable = loader._batchTable;\n  const batchLength = loader._batchLength;\n\n  if (batchLength === 0) {\n    return;\n  }\n\n  let structuralMetadata;\n  if (defined(batchTable.json)) {\n    // Add the structural metadata from the batch table to the model components.\n    structuralMetadata = parseBatchTable({\n      count: batchLength,\n      batchTable: batchTable.json,\n      binaryBody: batchTable.binary,\n    });\n  } else {\n    // If batch table is not defined, create a property table without any properties.\n    const emptyPropertyTable = new PropertyTable({\n      name: MetadataClass.BATCH_TABLE_CLASS_NAME,\n      count: batchLength,\n    });\n    structuralMetadata = new StructuralMetadata({\n      schema: {},\n      propertyTables: [emptyPropertyTable],\n    });\n  }\n\n  // Add the feature ID attribute to the primitives.\n  const nodes = components.scene.nodes;\n  const length = nodes.length;\n  for (let i = 0; i < length; i++) {\n    processNode(nodes[i]);\n  }\n  components.structuralMetadata = structuralMetadata;\n}\n\n// Recursive function to add the feature ID attribute to all primitives that have a feature ID vertex attribute.\nfunction processNode(node) {\n  const childrenLength = node.children.length;\n  for (let i = 0; i < childrenLength; i++) {\n    processNode(node.children[i]);\n  }\n\n  const primitivesLength = node.primitives.length;\n  for (let i = 0; i < primitivesLength; i++) {\n    const primitive = node.primitives[i];\n    const featureIdVertexAttribute = ModelUtility.getAttributeBySemantic(\n      primitive,\n      VertexAttributeSemantic.FEATURE_ID,\n    );\n    if (defined(featureIdVertexAttribute)) {\n      featureIdVertexAttribute.setIndex = 0;\n      const featureIdAttribute = new FeatureIdAttribute();\n      featureIdAttribute.propertyTableId = 0;\n      featureIdAttribute.setIndex = 0;\n      featureIdAttribute.positionalLabel = \"featureId_0\";\n      primitive.featureIds.push(featureIdAttribute);\n    }\n  }\n}\n\nB3dmLoader.prototype.unload = function () {\n  if (defined(this._gltfLoader) && !this._gltfLoader.isDestroyed()) {\n    this._gltfLoader.unload();\n  }\n\n  this._components = undefined;\n  this._arrayBuffer = undefined;\n};\n\nexport default B3dmLoader;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}