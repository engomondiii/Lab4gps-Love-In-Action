{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/IWL_Fresh_Start/Lab4gps-Love-In-Action/src/components/Globe/Globe.js\",\n  _s = $RefreshSig$();\n/* global Cesium */\nimport React, { useEffect, useRef } from 'react';\nimport { useLang } from '../Context/LangContext'; // Import your global language context\nimport '../styles/Globe.css'; // Import the separate style file\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Globe = () => {\n  _s();\n  const globeRef = useRef(null);\n  const viewerRef = useRef(null);\n  const animationIdRef = useRef(null);\n\n  // Use the global language context to determine if text should be English or Korean\n  const {\n    language\n  } = useLang();\n\n  // Inline dictionary for multi-language support\n  const text = {\n    en: {\n      stopRotation: \"Stop Rotation\"\n    },\n    ko: {\n      stopRotation: \"회전 중지\"\n    }\n  };\n\n  // Helper function to return the correct text based on the current language\n  const t = key => text[language][key];\n  useEffect(() => {\n    // Set your Cesium Ion access token\n    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkMWY1MGUyNC0wNjFkLTQ1YWMtYTBhNi1mYTRkMTAzNWYzOGEiLCJpZCI6MjYzODA1LCJpYXQiOjE3MzQ2Nzk0ODd9.OvjRSddy3Mt1P1rOGIFKOQQcxIqTX2i7sM1Ha4s7_qs';\n\n    // Initialize Cesium Viewer if not done yet\n    if (globeRef.current && !viewerRef.current) {\n      try {\n        viewerRef.current = new Cesium.Viewer(globeRef.current, {\n          imageryProvider: new Cesium.IonImageryProvider({\n            assetId: 2\n          }),\n          baseLayerPicker: false,\n          geocoder: false,\n          homeButton: false,\n          infoBox: false,\n          navigationHelpButton: false,\n          sceneModePicker: false,\n          timeline: false,\n          animation: false,\n          requestRenderMode: true,\n          maximumRenderTimeChange: Infinity\n        });\n\n        // Set initial camera view (top-down perspective)\n        viewerRef.current.scene.camera.setView({\n          destination: Cesium.Cartesian3.fromDegrees(-74.0707383, 40.7117244, 10000000),\n          orientation: {\n            heading: Cesium.Math.toRadians(0),\n            pitch: Cesium.Math.toRadians(-90),\n            roll: 0.0\n          }\n        });\n\n        // Continuous rotation\n        const rotateEarth = () => {\n          const spinRate = 0.01;\n          const delta = spinRate / 60; // 60 FPS assumption\n          viewerRef.current.scene.camera.rotate(Cesium.Cartesian3.UNIT_Z, -delta);\n          animationIdRef.current = requestAnimationFrame(rotateEarth);\n        };\n        rotateEarth(); // Start rotation immediately\n\n        // Scene interactions to stop / start rotation on user actions\n        viewerRef.current.scene.screenSpaceCameraController.inertiaSpin = 0;\n        viewerRef.current.scene.screenSpaceCameraController.inertiaTranslate = 0;\n        viewerRef.current.scene.screenSpaceCameraController.inertiaZoom = 0;\n        const stopRotation = () => {\n          if (animationIdRef.current) {\n            cancelAnimationFrame(animationIdRef.current);\n            animationIdRef.current = null;\n          }\n        };\n        const startRotation = () => {\n          if (!animationIdRef.current) {\n            rotateEarth();\n          }\n        };\n\n        // Listen for pointer/wheel events to stop or resume rotation\n        viewerRef.current.canvas.addEventListener('pointerdown', stopRotation);\n        viewerRef.current.canvas.addEventListener('pointerup', startRotation);\n        viewerRef.current.canvas.addEventListener('wheel', stopRotation, {\n          passive: true\n        });\n        viewerRef.current.canvas.addEventListener('wheel', startRotation, {\n          passive: true,\n          delay: 1000\n        });\n      } catch (error) {\n        console.error('Failed to initialize Cesium viewer:', error);\n      }\n    }\n    return () => {\n      if (viewerRef.current) {\n        viewerRef.current.destroy();\n        viewerRef.current = null;\n      }\n    };\n  }, []);\n\n  // Manual stop rotation button\n  const handleStopRotationClick = () => {\n    if (animationIdRef.current) {\n      cancelAnimationFrame(animationIdRef.current);\n      animationIdRef.current = null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stop-rotation-button-container\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"stop-rotation-button\",\n        onClick: handleStopRotationClick,\n        children: t(\"stopRotation\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: globeRef,\n      id: \"cesiumContainer\",\n      style: {\n        height: \"100vh\",\n        width: \"100vw\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Globe, \"DfhuJHSDHP9QAThg8MVGvgjI32M=\", false, function () {\n  return [useLang];\n});\n_c = Globe;\nexport default Globe;\nvar _c;\n$RefreshReg$(_c, \"Globe\");","map":{"version":3,"names":["React","useEffect","useRef","useLang","jsxDEV","_jsxDEV","Fragment","_Fragment","Globe","_s","globeRef","viewerRef","animationIdRef","language","text","en","stopRotation","ko","t","key","Cesium","Ion","defaultAccessToken","current","Viewer","imageryProvider","IonImageryProvider","assetId","baseLayerPicker","geocoder","homeButton","infoBox","navigationHelpButton","sceneModePicker","timeline","animation","requestRenderMode","maximumRenderTimeChange","Infinity","scene","camera","setView","destination","Cartesian3","fromDegrees","orientation","heading","Math","toRadians","pitch","roll","rotateEarth","spinRate","delta","rotate","UNIT_Z","requestAnimationFrame","screenSpaceCameraController","inertiaSpin","inertiaTranslate","inertiaZoom","cancelAnimationFrame","startRotation","canvas","addEventListener","passive","delay","error","console","destroy","handleStopRotationClick","children","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","id","style","height","width","_c","$RefreshReg$"],"sources":["/Users/mac/Desktop/IWL_Fresh_Start/Lab4gps-Love-In-Action/src/components/Globe/Globe.js"],"sourcesContent":["/* global Cesium */\nimport React, { useEffect, useRef } from 'react';\nimport { useLang } from '../Context/LangContext'; // Import your global language context\nimport '../styles/Globe.css'; // Import the separate style file\n\nconst Globe = () => {\n  const globeRef = useRef(null);\n  const viewerRef = useRef(null);\n  const animationIdRef = useRef(null);\n\n  // Use the global language context to determine if text should be English or Korean\n  const { language } = useLang();\n\n  // Inline dictionary for multi-language support\n  const text = {\n    en: {\n      stopRotation: \"Stop Rotation\",\n    },\n    ko: {\n      stopRotation: \"회전 중지\",\n    },\n  };\n\n  // Helper function to return the correct text based on the current language\n  const t = (key) => text[language][key];\n\n  useEffect(() => {\n    // Set your Cesium Ion access token\n    Cesium.Ion.defaultAccessToken =\n      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkMWY1MGUyNC0wNjFkLTQ1YWMtYTBhNi1mYTRkMTAzNWYzOGEiLCJpZCI6MjYzODA1LCJpYXQiOjE3MzQ2Nzk0ODd9.OvjRSddy3Mt1P1rOGIFKOQQcxIqTX2i7sM1Ha4s7_qs';\n\n    // Initialize Cesium Viewer if not done yet\n    if (globeRef.current && !viewerRef.current) {\n      try {\n        viewerRef.current = new Cesium.Viewer(globeRef.current, {\n          imageryProvider: new Cesium.IonImageryProvider({ assetId: 2 }),\n          baseLayerPicker: false,\n          geocoder: false,\n          homeButton: false,\n          infoBox: false,\n          navigationHelpButton: false,\n          sceneModePicker: false,\n          timeline: false,\n          animation: false,\n          requestRenderMode: true,\n          maximumRenderTimeChange: Infinity,\n        });\n\n        // Set initial camera view (top-down perspective)\n        viewerRef.current.scene.camera.setView({\n          destination: Cesium.Cartesian3.fromDegrees(-74.0707383, 40.7117244, 10000000),\n          orientation: {\n            heading: Cesium.Math.toRadians(0),\n            pitch: Cesium.Math.toRadians(-90),\n            roll: 0.0,\n          },\n        });\n\n        // Continuous rotation\n        const rotateEarth = () => {\n          const spinRate = 0.01;\n          const delta = spinRate / 60; // 60 FPS assumption\n          viewerRef.current.scene.camera.rotate(Cesium.Cartesian3.UNIT_Z, -delta);\n          animationIdRef.current = requestAnimationFrame(rotateEarth);\n        };\n\n        rotateEarth(); // Start rotation immediately\n\n        // Scene interactions to stop / start rotation on user actions\n        viewerRef.current.scene.screenSpaceCameraController.inertiaSpin = 0;\n        viewerRef.current.scene.screenSpaceCameraController.inertiaTranslate = 0;\n        viewerRef.current.scene.screenSpaceCameraController.inertiaZoom = 0;\n\n        const stopRotation = () => {\n          if (animationIdRef.current) {\n            cancelAnimationFrame(animationIdRef.current);\n            animationIdRef.current = null;\n          }\n        };\n\n        const startRotation = () => {\n          if (!animationIdRef.current) {\n            rotateEarth();\n          }\n        };\n\n        // Listen for pointer/wheel events to stop or resume rotation\n        viewerRef.current.canvas.addEventListener('pointerdown', stopRotation);\n        viewerRef.current.canvas.addEventListener('pointerup', startRotation);\n        viewerRef.current.canvas.addEventListener('wheel', stopRotation, { passive: true });\n        viewerRef.current.canvas.addEventListener('wheel', startRotation, { passive: true, delay: 1000 });\n\n      } catch (error) {\n        console.error('Failed to initialize Cesium viewer:', error);\n      }\n    }\n\n    return () => {\n      if (viewerRef.current) {\n        viewerRef.current.destroy();\n        viewerRef.current = null;\n      }\n    };\n  }, []);\n\n  // Manual stop rotation button\n  const handleStopRotationClick = () => {\n    if (animationIdRef.current) {\n      cancelAnimationFrame(animationIdRef.current);\n      animationIdRef.current = null;\n    }\n  };\n\n  return (\n    <>\n      {/* Button to manually stop rotation */}\n      <div className=\"stop-rotation-button-container\">\n        <button className=\"stop-rotation-button\" onClick={handleStopRotationClick}>\n          {t(\"stopRotation\")}\n        </button>\n      </div>\n\n      <div\n        ref={globeRef}\n        id=\"cesiumContainer\"\n        style={{ height: \"100vh\", width: \"100vw\" }}\n      />\n    </>\n  );\n};\n\nexport default Globe;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}