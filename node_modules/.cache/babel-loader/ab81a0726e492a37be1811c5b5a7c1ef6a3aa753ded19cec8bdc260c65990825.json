{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/IWL_Fresh_Start/Lab4gps-Love-In-Action/src/components/Globe/Globe.js\",\n  _s = $RefreshSig$();\n/* global Cesium */\nimport React, { useEffect, useRef } from 'react';\nimport { useLang } from '../Context/LangContext'; // Import your global language context\nimport '../styles/Globe.css'; // Import the separate style file\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Globe = () => {\n  _s();\n  const globeRef = useRef(null);\n  const viewerRef = useRef(null);\n  const animationIdRef = useRef(null);\n\n  // Use the global language context to determine if text should be English or Korean\n  const {\n    language\n  } = useLang();\n\n  // Inline dictionary for multi-language support\n  const text = {\n    en: {\n      stopRotation: \"Stop Rotation\"\n    },\n    ko: {\n      stopRotation: \"회전 중지\"\n    }\n  };\n\n  // Helper function to return the correct text based on the current language\n  const t = key => text[language][key];\n\n  // Handle rotation stop\n  const handleStopRotationClick = () => {\n    if (animationIdRef.current) {\n      cancelAnimationFrame(animationIdRef.current);\n      animationIdRef.current = null;\n    }\n  };\n\n  // Hide or show other elements (e.g., navbar, footer) based on fullscreen state\n  const toggleElementsVisibility = hide => {\n    // You can customize the selectors to target your site's header, navbar, footer, etc.\n    const selectors = ['.navbar', '.footer'];\n    selectors.forEach(selector => {\n      document.querySelectorAll(selector).forEach(elem => {\n        // If hide === true => display: none\n        // If hide === false => remove inline style\n        elem.style.display = hide ? 'none' : '';\n      });\n    });\n  };\n\n  // Listen for fullscreen changes at the document level\n  const handleFullScreenChange = () => {\n    // Check if we are in fullscreen\n    const isFullScreen = !!document.fullscreenElement;\n    toggleElementsVisibility(isFullScreen);\n  };\n  useEffect(() => {\n    // Set your Cesium Ion access token\n    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkMWY1MGUyNC0wNjFkLTQ1YWMtYTBhNi1mYTRkMTAzNWYzOGEiLCJpZCI6MjYzODA1LCJpYXQiOjE3MzQ2Nzk0ODd9.OvjRSddy3Mt1P1rOGIFKOQQcxIqTX2i7sM1Ha4s7_qs';\n\n    // Attach a listener for all fullscreen events\n    document.addEventListener('fullscreenchange', handleFullScreenChange);\n    if (globeRef.current && !viewerRef.current) {\n      try {\n        // Enable Cesium's built-in fullscreenButton\n        viewerRef.current = new Cesium.Viewer(globeRef.current, {\n          imageryProvider: new Cesium.IonImageryProvider({\n            assetId: 2\n          }),\n          baseLayerPicker: false,\n          geocoder: false,\n          homeButton: false,\n          infoBox: false,\n          navigationHelpButton: false,\n          sceneModePicker: false,\n          timeline: false,\n          animation: false,\n          fullscreenButton: true,\n          // <--- Enable the built-in fullscreen button\n          requestRenderMode: true,\n          maximumRenderTimeChange: Infinity\n        });\n\n        // Set initial camera view (top-down perspective)\n        viewerRef.current.scene.camera.setView({\n          destination: Cesium.Cartesian3.fromDegrees(-74.0707383, 40.7117244, 10000000),\n          orientation: {\n            heading: Cesium.Math.toRadians(0),\n            pitch: Cesium.Math.toRadians(-90),\n            roll: 0.0\n          }\n        });\n\n        // Continuous rotation\n        const rotateEarth = () => {\n          const spinRate = 0.01;\n          const delta = spinRate / 60; // 60 FPS assumption\n          viewerRef.current.scene.camera.rotate(Cesium.Cartesian3.UNIT_Z, -delta);\n          animationIdRef.current = requestAnimationFrame(rotateEarth);\n        };\n        rotateEarth(); // Start rotation immediately\n\n        // Scene interactions to stop / start rotation on user actions\n        viewerRef.current.scene.screenSpaceCameraController.inertiaSpin = 0;\n        viewerRef.current.scene.screenSpaceCameraController.inertiaTranslate = 0;\n        viewerRef.current.scene.screenSpaceCameraController.inertiaZoom = 0;\n        const stopRotation = () => {\n          if (animationIdRef.current) {\n            cancelAnimationFrame(animationIdRef.current);\n            animationIdRef.current = null;\n          }\n        };\n        const startRotation = () => {\n          if (!animationIdRef.current) {\n            rotateEarth();\n          }\n        };\n\n        // Listen for pointer/wheel events to stop or resume rotation\n        viewerRef.current.canvas.addEventListener('pointerdown', stopRotation);\n        viewerRef.current.canvas.addEventListener('pointerup', startRotation);\n        viewerRef.current.canvas.addEventListener('wheel', stopRotation, {\n          passive: true\n        });\n        viewerRef.current.canvas.addEventListener('wheel', startRotation, {\n          passive: true,\n          delay: 1000\n        });\n      } catch (error) {\n        console.error('Failed to initialize Cesium viewer:', error);\n      }\n    }\n\n    // Cleanup on unmount\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullScreenChange);\n      if (viewerRef.current) {\n        viewerRef.current.destroy();\n        viewerRef.current = null;\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stop-rotation-button-container\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"stop-rotation-button\",\n        onClick: handleStopRotationClick,\n        children: t(\"stopRotation\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: globeRef,\n      id: \"cesiumContainer\",\n      style: {\n        height: '100vh',\n        width: '100vw'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Globe, \"DfhuJHSDHP9QAThg8MVGvgjI32M=\", false, function () {\n  return [useLang];\n});\n_c = Globe;\nexport default Globe;\nvar _c;\n$RefreshReg$(_c, \"Globe\");","map":{"version":3,"names":["React","useEffect","useRef","useLang","jsxDEV","_jsxDEV","Fragment","_Fragment","Globe","_s","globeRef","viewerRef","animationIdRef","language","text","en","stopRotation","ko","t","key","handleStopRotationClick","current","cancelAnimationFrame","toggleElementsVisibility","hide","selectors","forEach","selector","document","querySelectorAll","elem","style","display","handleFullScreenChange","isFullScreen","fullscreenElement","Cesium","Ion","defaultAccessToken","addEventListener","Viewer","imageryProvider","IonImageryProvider","assetId","baseLayerPicker","geocoder","homeButton","infoBox","navigationHelpButton","sceneModePicker","timeline","animation","fullscreenButton","requestRenderMode","maximumRenderTimeChange","Infinity","scene","camera","setView","destination","Cartesian3","fromDegrees","orientation","heading","Math","toRadians","pitch","roll","rotateEarth","spinRate","delta","rotate","UNIT_Z","requestAnimationFrame","screenSpaceCameraController","inertiaSpin","inertiaTranslate","inertiaZoom","startRotation","canvas","passive","delay","error","console","removeEventListener","destroy","children","className","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","id","height","width","_c","$RefreshReg$"],"sources":["/Users/mac/Desktop/IWL_Fresh_Start/Lab4gps-Love-In-Action/src/components/Globe/Globe.js"],"sourcesContent":["/* global Cesium */\nimport React, { useEffect, useRef } from 'react';\nimport { useLang } from '../Context/LangContext'; // Import your global language context\nimport '../styles/Globe.css'; // Import the separate style file\n\nconst Globe = () => {\n  const globeRef = useRef(null);\n  const viewerRef = useRef(null);\n  const animationIdRef = useRef(null);\n\n  // Use the global language context to determine if text should be English or Korean\n  const { language } = useLang();\n\n  // Inline dictionary for multi-language support\n  const text = {\n    en: {\n      stopRotation: \"Stop Rotation\",\n    },\n    ko: {\n      stopRotation: \"회전 중지\",\n    },\n  };\n\n  // Helper function to return the correct text based on the current language\n  const t = (key) => text[language][key];\n\n  // Handle rotation stop\n  const handleStopRotationClick = () => {\n    if (animationIdRef.current) {\n      cancelAnimationFrame(animationIdRef.current);\n      animationIdRef.current = null;\n    }\n  };\n\n  // Hide or show other elements (e.g., navbar, footer) based on fullscreen state\n  const toggleElementsVisibility = (hide) => {\n    // You can customize the selectors to target your site's header, navbar, footer, etc.\n    const selectors = ['.navbar', '.footer'];\n\n    selectors.forEach((selector) => {\n      document.querySelectorAll(selector).forEach((elem) => {\n        // If hide === true => display: none\n        // If hide === false => remove inline style\n        elem.style.display = hide ? 'none' : '';\n      });\n    });\n  };\n\n  // Listen for fullscreen changes at the document level\n  const handleFullScreenChange = () => {\n    // Check if we are in fullscreen\n    const isFullScreen = !!document.fullscreenElement;\n    toggleElementsVisibility(isFullScreen);\n  };\n\n  useEffect(() => {\n    // Set your Cesium Ion access token\n    Cesium.Ion.defaultAccessToken =\n      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJkMWY1MGUyNC0wNjFkLTQ1YWMtYTBhNi1mYTRkMTAzNWYzOGEiLCJpZCI6MjYzODA1LCJpYXQiOjE3MzQ2Nzk0ODd9.OvjRSddy3Mt1P1rOGIFKOQQcxIqTX2i7sM1Ha4s7_qs';\n\n    // Attach a listener for all fullscreen events\n    document.addEventListener('fullscreenchange', handleFullScreenChange);\n\n    if (globeRef.current && !viewerRef.current) {\n      try {\n        // Enable Cesium's built-in fullscreenButton\n        viewerRef.current = new Cesium.Viewer(globeRef.current, {\n          imageryProvider: new Cesium.IonImageryProvider({ assetId: 2 }),\n          baseLayerPicker: false,\n          geocoder: false,\n          homeButton: false,\n          infoBox: false,\n          navigationHelpButton: false,\n          sceneModePicker: false,\n          timeline: false,\n          animation: false,\n          fullscreenButton: true,     // <--- Enable the built-in fullscreen button\n          requestRenderMode: true,\n          maximumRenderTimeChange: Infinity,\n        });\n\n        // Set initial camera view (top-down perspective)\n        viewerRef.current.scene.camera.setView({\n          destination: Cesium.Cartesian3.fromDegrees(\n            -74.0707383,\n            40.7117244,\n            10000000\n          ),\n          orientation: {\n            heading: Cesium.Math.toRadians(0),\n            pitch: Cesium.Math.toRadians(-90),\n            roll: 0.0,\n          },\n        });\n\n        // Continuous rotation\n        const rotateEarth = () => {\n          const spinRate = 0.01;\n          const delta = spinRate / 60; // 60 FPS assumption\n          viewerRef.current.scene.camera.rotate(Cesium.Cartesian3.UNIT_Z, -delta);\n          animationIdRef.current = requestAnimationFrame(rotateEarth);\n        };\n\n        rotateEarth(); // Start rotation immediately\n\n        // Scene interactions to stop / start rotation on user actions\n        viewerRef.current.scene.screenSpaceCameraController.inertiaSpin = 0;\n        viewerRef.current.scene.screenSpaceCameraController.inertiaTranslate = 0;\n        viewerRef.current.scene.screenSpaceCameraController.inertiaZoom = 0;\n\n        const stopRotation = () => {\n          if (animationIdRef.current) {\n            cancelAnimationFrame(animationIdRef.current);\n            animationIdRef.current = null;\n          }\n        };\n\n        const startRotation = () => {\n          if (!animationIdRef.current) {\n            rotateEarth();\n          }\n        };\n\n        // Listen for pointer/wheel events to stop or resume rotation\n        viewerRef.current.canvas.addEventListener('pointerdown', stopRotation);\n        viewerRef.current.canvas.addEventListener('pointerup', startRotation);\n        viewerRef.current.canvas.addEventListener('wheel', stopRotation, { passive: true });\n        viewerRef.current.canvas.addEventListener('wheel', startRotation, { passive: true, delay: 1000 });\n      } catch (error) {\n        console.error('Failed to initialize Cesium viewer:', error);\n      }\n    }\n\n    // Cleanup on unmount\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullScreenChange);\n\n      if (viewerRef.current) {\n        viewerRef.current.destroy();\n        viewerRef.current = null;\n      }\n    };\n  }, []);\n\n  return (\n    <>\n      {/* Button to manually stop rotation */}\n      <div className=\"stop-rotation-button-container\">\n        <button\n          className=\"stop-rotation-button\"\n          onClick={handleStopRotationClick}\n        >\n          {t(\"stopRotation\")}\n        </button>\n      </div>\n\n      <div\n        ref={globeRef}\n        id=\"cesiumContainer\"\n        style={{ height: '100vh', width: '100vw' }}\n      />\n    </>\n  );\n};\n\nexport default Globe;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}